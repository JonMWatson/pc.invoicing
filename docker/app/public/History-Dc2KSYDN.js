import{u as b,bO as y,a as C,br as $,f as N,cm as k,a7 as _,d as w,g as B,b as F,j as s,C as S,b0 as T,S as D,bl as H,D as z,l as E,h as x,i as L,H as M,bC as O,r as P,e as R}from"./bundle.D3-hVUGj.js";import{H as A}from"./History-BTuPZ_tO.js";const G=M.div`
  background-color: ${({theme:n})=>n.backgroundColor};

  &:hover {
    background-color: ${({theme:n})=>n.hoverBackgroundColor};
  }
`;x.extend(O);function Q(){var o,c;const[n]=b(),{id:l}=y(),i=C(),{timeFormat:p}=$(),{dateFormat:u}=N(),h=k(),{quote:t}=h,v=_(),f=w(),j=B(),{data:e,isLoading:g}=F({queryKey:["/api/v1/quotes",l,"payments"],queryFn:()=>P("GET",R(`/api/v1/quotes/${l}?include=payments,activities.history&reminder_schedule=true`)).then(a=>a.data.data),enabled:!!l,staleTime:1/0});return s.jsx(S,{title:n("history"),className:"shadow-sm",style:{borderColor:i.$24},headerStyle:{borderColor:i.$20},withoutBodyPadding:!0,children:s.jsxs("div",{className:T("w-full px-2 pt-2",{"pb-10":(o=e==null?void 0:e.activities)==null?void 0:o.length,"pb-6":(e==null?void 0:e.activities)&&(e==null?void 0:e.activities.filter(({history:a})=>a==null?void 0:a.id).length)===0}),children:[g&&s.jsx("div",{className:"flex justify-center",children:s.jsx(D,{})}),s.jsxs("div",{children:[(e==null?void 0:e.activities)&&e.activities.filter(({history:a})=>a==null?void 0:a.id).length===0&&s.jsx("div",{className:"px-3 pt-3 text-sm",children:n("api_404")}),!!((c=e==null?void 0:e.activities)!=null&&c.length)&&s.jsx("div",{className:"flex flex-col w-full",children:(e==null?void 0:e.activities)&&e.activities.map(a=>{var d,r,m;return s.jsxs(G,{className:"flex items-center justify-start p-4 space-x-3 rounded-md cursor-pointer",onClick:()=>v(L("/activities/:id",{id:a.id})),theme:{backgroundColor:i.$1,hoverBackgroundColor:i.$25},children:[s.jsx("div",{className:"p-2 rounded-full",style:{backgroundColor:i.$20},children:s.jsx(A,{size:"1.3rem",color:i.$16,filledColor:i.$16})}),s.jsxs("div",{className:"flex flex-col items-start space-y-0.5 justify-center",children:[s.jsxs("div",{className:"flex space-x-1 text-sm",children:[s.jsx("span",{style:{color:i.$3},children:t!=null&&t.client?f(a.history.amount,(d=t==null?void 0:t.client)==null?void 0:d.country_id,(r=t==null?void 0:t.client)==null?void 0:r.settings.currency_id):null}),s.jsx("div",{children:s.jsx(H,{color:i.$17,size:"1.1rem"})}),s.jsx(z,{to:`/clients/${a.client_id}`,renderSpan:j("client",t==null?void 0:t.client),children:(m=t==null?void 0:t.client)==null?void 0:m.display_name})]}),s.jsxs("div",{className:"flex items-center space-x-1 text-xs",style:{color:i.$17},children:[s.jsx("span",{children:E(a.created_at,`${u} ${p}`)}),s.jsx("span",{children:x.unix(a.created_at).fromNow()})]})]})]},a.id)})})]})]})})}export{Q as default};
