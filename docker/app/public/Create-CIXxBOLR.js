import{u as E,L as T,a7 as B,b2 as k,fh as F,ao as q,fi as A,p as a,j as v,Q as D,fg as I,bd as o,bc as P,r as h,e as x,fj as Q,$ as R,fk as V,fl as $,i as L}from"./bundle.D3-hVUGj.js";function O(){const[r]=E(),{documentTitle:S}=T("create_vendor"),b=[{name:r("vendors"),href:"/vendors"},{name:r("create_vendor"),href:"/vendors/:id/create"}],g=B(),c=k(),{data:n}=F(),{isAdmin:i}=q(),t=A(),[s,d]=a.useState(),[j,y]=a.useState(),[u,f]=a.useState(!1),[l,_]=a.useState([{first_name:"",last_name:"",email:"",phone:"",send_email:!1}]);a.useEffect(()=>{n&&d({...n,country_id:""})},[n]);const C=()=>{if(u)return;o.processing(),f(!0),P.set(s,"contacts",l);const m=[h("POST",x("/api/v1/vendors"),s)];i&&m.push(h("PUT",x("/api/v1/companies/:id",{id:t==null?void 0:t.id}),t)),Q.all(m).then(e=>{o.success("created_vendor"),R(["vendors"]),i&&(c(V({object:"company",data:e[1].data.data})),c($("company"))),g(L("/vendors/:id",{id:e[0].data.data.id}))}).catch(e=>{var p;((p=e.response)==null?void 0:p.status)===422&&(o.dismiss(),y(e.response.data))}).finally(()=>f(!1))};return v.jsx(D,{title:S,breadcrumbs:b,onSaveClick:s&&C,disableSaveButton:!s||u,children:s&&v.jsx(I,{vendor:s,setVendor:d,errors:j,setContacts:_,contacts:l})})}export{O as default};
