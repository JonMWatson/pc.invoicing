import{u as I,dF as y,p as l,j as e,aw as i,ax as d,f6 as P,aa as V,cP as E,ab as S,dG as k,bd as C,r as B,e as F,$ as O,ap as D,aG as G,aH as R,aB as a,aC as r,f7 as T,aP as W,aQ as _,aR as $}from"./bundle.D3-hVUGj.js";function q(n){const[t]=I(),{mergeFromVendorId:o}=n,g=y(),[s,f]=l.useState(!1),[v,c]=l.useState(!1),[u,m]=l.useState(""),[M,h]=l.useState(!1),j=()=>{c(!1),m("")},b=(x,w)=>{s||(C.processing(),f(!0),B("POST",F("/api/v1/vendors/:mergeIntoVendorId/:mergeFromVendorId/merge",{mergeIntoVendorId:u,mergeFromVendorId:o}),{},{headers:{"X-Api-Password":x}}).then(()=>{C.success("merged_vendors"),j(),O(["vendors"])}).catch(A=>{var p;((p=A.response)==null?void 0:p.status)===412&&(g(w),h(!0))}).finally(()=>f(!1)))};return e.jsxs(e.Fragment,{children:[e.jsx(i,{onClick:()=>c(!0),icon:e.jsx(d,{element:P}),children:t("merge")}),e.jsxs(V,{title:t("merge_into"),visible:v,onClose:j,overflowVisible:!0,children:[e.jsx(E,{inputLabel:t("vendor"),value:u,onChange:x=>m(x.id),onClearButtonClick:()=>m(""),exclude:[o],withoutAction:!0,initiallyVisible:!0}),e.jsx("div",{className:"self-end pt-2",children:e.jsx(S,{disableWithoutIcon:!0,disabled:!u,onClick:()=>{c(!1),setTimeout(()=>{h(!0)},310)},children:t("merge")})})]}),e.jsx(k,{show:M,onClose:h,onSave:b})]})}function L(){const[n]=I(),t=T(),{isEditOrShowPage:o}=D({entity:"vendor"});return[s=>e.jsx(G,{entity:"vendor",entityId:s.id,label:s.number,labelElement:e.jsx(i,{icon:e.jsx(d,{element:R}),children:n("add_comment")})}),s=>s&&e.jsx(q,{mergeFromVendorId:s.id}),s=>o&&a(s)===r.Active&&e.jsx(i,{onClick:()=>t(s.id,"archive"),icon:e.jsx(d,{element:W}),children:n("archive")}),s=>o&&(a(s)===r.Archived||a(s)===r.Deleted)&&e.jsx(i,{onClick:()=>t(s.id,"restore"),icon:e.jsx(d,{element:_}),children:n("restore")}),s=>o&&(a(s)===r.Active||a(s)===r.Archived)&&e.jsx(i,{onClick:()=>t(s.id,"delete"),icon:e.jsx(d,{element:$}),children:n("delete")})]}export{L as u};
