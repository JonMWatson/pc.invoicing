import{u as C,a7 as b,a as $,cm as N,br as v,f as _,d as k,g,b as w,j as a,C as B,b0 as F,S as H,D as S,l as T,h as x,i as D,H as q,bC as z,r as A,e as E}from"./bundle.D3-hVUGj.js";import{H as L}from"./History-BTuPZ_tO.js";import{A as M}from"./arrow-right-EvpM00SS.js";x.extend(z);const R=q.div`
  display: flex;
  background-color: ${l=>l.theme.backgroundColor};

  &:hover {
    background-color: ${l=>l.theme.hoverBackgroundColor};
  }
`;function P(){var d,n;const[l]=C(),h=b(),e=$(),p=N(),{recurringInvoice:s}=p,{timeFormat:y}=v(),{dateFormat:f}=_(),j=k(),u=g(),{data:t,isLoading:o}=w({queryKey:["/api/v1/recurring_invoices",s==null?void 0:s.id,"slider"],queryFn:()=>A("GET",E("/api/v1/recurring_invoices/:id?include=activities.history&show_dates=true",{id:s==null?void 0:s.id})).then(i=>i.data.data),enabled:!!(s!=null&&s.id),staleTime:1/0});return a.jsx(B,{title:l("history"),className:"shadow-sm",style:{borderColor:e.$24},headerStyle:{borderColor:e.$20},withoutBodyPadding:!0,children:a.jsxs("div",{className:F("w-full px-2 pt-2",{"pb-10":(d=t==null?void 0:t.activities)==null?void 0:d.length,"pb-6":(t==null?void 0:t.activities)&&(t==null?void 0:t.activities.length)===0}),children:[o&&a.jsx("div",{className:"flex justify-center",children:a.jsx(H,{})}),!o&&(t==null?void 0:t.activities)&&!t.activities.length&&a.jsx("div",{className:"px-3 pt-3 text-sm",children:l("api_404")}),!!((n=t==null?void 0:t.activities)!=null&&n.length)&&a.jsx("div",{className:"flex flex-col w-full",children:(t==null?void 0:t.activities)&&t.activities.map(i=>{var c,m,r;return a.jsxs(R,{className:"flex items-center justify-start p-4 space-x-3 rounded-md cursor-pointer",onClick:()=>h(D("/activities/:id",{id:i.id})),theme:{backgroundColor:e.$1,hoverBackgroundColor:e.$25},children:[a.jsx("div",{className:"p-2 rounded-full",style:{backgroundColor:e.$20},children:a.jsx(L,{size:"1.3rem",color:e.$16,filledColor:e.$16})}),a.jsxs("div",{className:"flex flex-col items-start space-y-0.5 justify-center",children:[a.jsxs("div",{className:"flex space-x-1 text-sm",children:[a.jsx("span",{style:{color:e.$3},children:s!=null&&s.client?j(i.history.amount||0,(c=s==null?void 0:s.client)==null?void 0:c.country_id,(m=s==null?void 0:s.client)==null?void 0:m.settings.currency_id):null}),a.jsx("div",{children:a.jsx(M,{color:e.$17,size:"1.1rem"})}),a.jsx(S,{to:`/clients/${i.client_id}`,renderSpan:u("client",s==null?void 0:s.client),children:(r=s==null?void 0:s.client)==null?void 0:r.display_name})]}),a.jsxs("div",{className:"flex items-center space-x-1 text-xs",style:{color:e.$17},children:[a.jsx("span",{children:T(i.created_at,`${f} ${y}`)}),a.jsx("span",{children:x.unix(i.created_at).fromNow()})]})]})]},i.id)})})]})})}export{P as default};
