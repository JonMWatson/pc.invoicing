import{u as _,a as k,bK as T,cm as P,eg as f,j as e,C as b,bt as L,cp as u,c9 as s,S as p}from"./bundle.D3-hVUGj.js";import{C as S}from"./ClientSelector-DtB3q7fn.js";import{u as w,I as F,a as D}from"./useProductColumns-BqpEcmPs.js";import{I as N,a as R}from"./InvoiceFooter-B_rthfIF.js";import{u as U}from"./useTaskColumns-DD2_WhOx.js";import"./ClientActionButtons-YTWpr-RA.js";import"./InvoiceViewer-CknzAqf8.js";function $(){const[a]=_(),C=k(),[r]=T(),h=P(),{recurringInvoice:t,errors:o,invoiceSum:x,client:g}=h,I=U(),j=w(),{handleChange:i,handleInvitationChange:v,handleLineItemChange:c,handleLineItemPropertyChange:l,handleCreateLineItem:d,handleDeleteLineItem:m}=f({client:g});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-12 gap-4",children:[e.jsx(b,{className:"col-span-12 xl:col-span-4 h-max shadow-sm",withContainer:!0,style:{borderColor:C.$24},children:e.jsx(S,{resource:t,onChange:n=>i("client_id",n),onLocationChange:n=>i("location_id",n),onClearButtonClick:()=>{i("client_id",""),i("location_id","")},onContactCheckboxChange:v,errorMessage:o==null?void 0:o.errors.client_id,disableWithSpinner:r.get("action")==="create"})}),e.jsx(N,{handleChange:i,errors:o}),e.jsx("div",{className:"col-span-12",children:e.jsxs(L,{tabs:[a("products"),a("tasks")],defaultTabIndex:r.get("table")==="tasks"?1:0,children:[e.jsx("div",{children:t?e.jsx(u,{type:"product",resource:t,items:t.line_items.filter(n=>[s.Product,s.UnpaidFee,s.PaidFee,s.LateFee].includes(n.type_id)),columns:j,relationType:"client_id",onLineItemChange:c,onSort:n=>i("line_items",n),onLineItemPropertyChange:l,onCreateItemClick:()=>d(s.Product),onDeleteRowClick:m}):e.jsx(p,{})}),e.jsx("div",{children:t?e.jsx(u,{type:"task",resource:t,items:t.line_items.filter(n=>n.type_id===s.Task),columns:I,relationType:"client_id",onLineItemChange:c,onSort:n=>i("line_items",n),onLineItemPropertyChange:l,onCreateItemClick:()=>d(s.Task),onDeleteRowClick:m}):e.jsx(p,{})})]})}),e.jsx(R,{handleChange:i,errors:o}),t&&e.jsx(F,{relationType:"client_id",resource:t,invoiceSum:x,onChange:(n,y)=>i(n,y)})]}),e.jsx("div",{className:"my-4",children:t&&e.jsx(D,{for:"create",resource:t,entity:"recurring_invoice",relationType:"client_id",endpoint:"/api/v1/live_preview?entity=:entity"})})]})}export{$ as default};
