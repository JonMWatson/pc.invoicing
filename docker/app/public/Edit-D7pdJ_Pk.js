import{u as f,bK as T,a as k,w as L,cm as P,bI as b,eh as S,eg as w,j as e,C as N,ed as R,bt as F,cp as h,c9 as i,S as x}from"./bundle.D3-hVUGj.js";import{C as D}from"./ClientSelector-DtB3q7fn.js";import{u as A,I as E,a as O}from"./useProductColumns-BqpEcmPs.js";import{I as U,a as $}from"./InvoiceFooter-B_rthfIF.js";import{u as B}from"./useTaskColumns-DD2_WhOx.js";import"./ClientActionButtons-YTWpr-RA.js";import"./InvoiceViewer-CknzAqf8.js";function J(){const[a]=f(),[C]=T(),l=k(),v=B(),r=L(),g=A(),j=P(),{recurringInvoice:s,errors:o,client:c}=j,I=b(S),{handleChange:n,handleInvitationChange:y,handleLineItemChange:d,handleLineItemPropertyChange:m,handleCreateLineItem:u,handleDeleteLineItem:p}=w({client:c});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-12 gap-4",children:[e.jsx(N,{className:"col-span-12 xl:col-span-4 h-max px-6 py-2 shadow-sm",style:{borderColor:l.$24},children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[s&&e.jsxs("div",{className:"flex items-center space-x-9",children:[e.jsx("span",{className:"text-sm font-medium",style:{color:l.$22},children:a("status")}),e.jsx("div",{children:e.jsx(R,{entity:s})})]}),e.jsx(D,{resource:s,onChange:t=>n("client_id",t),onClearButtonClick:()=>n("client_id",""),onLocationChange:t=>n("location_id",t),onContactCheckboxChange:y,errorMessage:o==null?void 0:o.errors.client_id,textOnly:!0,readonly:!0})]})}),e.jsx(U,{handleChange:n,errors:o}),e.jsx("div",{className:"col-span-12",children:e.jsxs(F,{tabs:[a("products"),a("tasks")],defaultTabIndex:C.get("table")==="tasks"?1:0,children:[e.jsx("div",{children:s&&c?e.jsx(h,{type:"product",resource:s,items:s.line_items.filter(t=>[i.Product,i.UnpaidFee,i.PaidFee,i.LateFee].includes(t.type_id)),columns:g,relationType:"client_id",onLineItemChange:d,onSort:t=>n("line_items",t),onLineItemPropertyChange:m,onCreateItemClick:()=>u(i.Product),onDeleteRowClick:p}):e.jsx(x,{})}),e.jsx("div",{children:s&&c?e.jsx(h,{type:"task",resource:s,items:s.line_items.filter(t=>t.type_id===i.Task),columns:v,relationType:"client_id",onLineItemChange:d,onSort:t=>n("line_items",t),onLineItemPropertyChange:m,onCreateItemClick:()=>u(i.Task),onDeleteRowClick:p}):e.jsx(x,{})})]})}),e.jsx($,{handleChange:n,errors:o}),s&&e.jsx(E,{relationType:"client_id",resource:s,invoiceSum:I,onChange:(t,_)=>n(t,_)})]}),(r==null?void 0:r.show_pdf_preview)&&e.jsx("div",{className:"my-4",children:s&&e.jsx(O,{for:"invoice",resource:s,entity:"recurring_invoice",relationType:"client_id",endpoint:"/api/v1/live_preview?entity=:entity",withRemoveLogoCTA:!0})})]})}export{J as default};
