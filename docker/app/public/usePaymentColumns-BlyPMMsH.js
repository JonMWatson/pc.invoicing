import{u as M,f as D,g as L,d as P,aT as k,w as H,bZ as R,aV as V,aW as F,j as o,l as _,D as f,i as b,aZ as j,di as A,dj as B,aY as O,a_ as Z,a$ as S,b0 as z}from"./bundle.D3-hVUGj.js";import{P as I}from"./PaymentStatus-Ba2_Ejbd.js";const W=["status","number","client","amount","invoice_number","date","type","transaction_reference"];function Y(){const[n,l,c,s]=F({entity:"payment"});return["status","number","client","amount","invoice_number","date","type","transaction_reference","archived_at","converted_amount","created_at",n,l,c,s,"entity_state","exchange_rate","is_deleted","private_notes","refunded","applied","credits","updated_at"]}function G(){var C;const{t:n}=M(),{dateFormat:l}=D(),c=L();Y();const s=P(),h=k(),d=H(),N=R(),m=V(),T=e=>{var t;if(e.exchange_rate)return e.amount*e.exchange_rate;if(e.client&&((t=e.client.settings.currency_id)==null?void 0:t.length)>1){const a=N(e.currency_id);if(a)return e.amount*a.exchange_rate}return e.amount},[x,y,g,v]=F({entity:"payment"}),w=[{column:"status",id:"status_id",label:n("status"),format:(e,t)=>o.jsx(I,{entity:t})},{column:"number",id:"number",label:n("number"),format:(e,t)=>o.jsx(f,{to:b("/payments/:id/edit",{id:t.id}),renderSpan:c("payment",t),children:t.number})},{column:"client",id:"client_id",label:n("client"),format:(e,t)=>{var a;return o.jsx(f,{to:b("/clients/:id",{id:t.client_id}),renderSpan:c("client",t.client),children:(a=t.client)==null?void 0:a.display_name})}},{column:"amount",id:"amount",label:n("amount"),format:(e,t)=>{var a,i;return s(e,(a=t.client)==null?void 0:a.country_id,(i=t.client)==null?void 0:i.settings.currency_id)}},{column:"invoice_number",id:"id",label:n("invoice_number"),format:(e,t)=>{var a,i,u;return o.jsx(j,{placement:"top",tooltipElement:o.jsx("div",{className:"flex space-x-2",children:(a=t.invoices)==null?void 0:a.map(r=>o.jsx(f,{to:b("/invoices/:id/edit",{id:r.id}),renderSpan:c("invoice",r),children:r.number},r.id))}),width:"auto",disabled:(((i=t.invoices)==null?void 0:i.length)??0)<4,children:o.jsx("div",{className:"flex space-x-2",children:(u=t.invoices)==null?void 0:u.map((r,E)=>E<3&&o.jsx(f,{to:b("/invoices/:id/edit",{id:r.id}),renderSpan:c("invoice",r),children:r.number},r.id))})})}},{column:"date",id:"date",label:n("date"),format:e=>_(e,l)},{column:"type",id:"type_id",label:n("type"),format:e=>o.jsx(A,{for:B,code:e,headless:!0})},{column:"transaction_reference",id:"transaction_reference",label:n("transaction_reference")},{column:"archived_at",id:"archived_at",label:n("archived_at"),format:e=>_(e,l)},{column:"converted_amount",id:"converted_amount",label:n("converted_amount"),format:(e,t)=>{var a,i;return s(T(t),(a=t.client)==null?void 0:a.country_id,(i=t.client)==null?void 0:i.settings.currency_id)}},{column:"created_at",id:"created_at",label:n("created_at"),format:e=>_(e,l)},{column:x,id:"custom_value1",label:x,format:e=>m("payment1",e==null?void 0:e.toString())},{column:y,id:"custom_value2",label:y,format:e=>m("payment2",e==null?void 0:e.toString())},{column:g,id:"custom_value3",label:g,format:e=>m("payment3",e==null?void 0:e.toString())},{column:v,id:"custom_value4",label:v,format:e=>m("payment4",e==null?void 0:e.toString())},{column:"entity_state",id:"id",label:n("entity_state"),format:(e,t)=>o.jsx(O,{entity:t})},{column:"exchange_rate",id:"exchange_rate",label:n("exchange_rate"),format:e=>h(e)},{column:"is_deleted",id:"is_deleted",label:n("is_deleted"),format:(e,t)=>t.is_deleted?n("yes"):n("no")},{column:"private_notes",id:"private_notes",label:n("private_notes"),format:e=>o.jsx(j,{width:"auto",tooltipElement:o.jsx("div",{className:"w-full max-h-48 overflow-auto whitespace-normal break-all",children:o.jsx("article",{className:z("prose prose-sm",{"prose-invert":!(d!=null&&d.dark_mode)}),dangerouslySetInnerHTML:{__html:S(e)}})}),children:o.jsx("span",{children:Z(S(e)).slice(0,50)})})},{column:"refunded",id:"refunded",label:n("refunded"),format:(e,t)=>{var a,i;return s(e,(a=t.client)==null?void 0:a.country_id,(i=t.client)==null?void 0:i.settings.currency_id)}},{column:"applied",id:"applied",label:n("applied"),format:(e,t)=>{var a,i;return s(e,(a=t.client)==null?void 0:a.country_id,(i=t.client)==null?void 0:i.settings.currency_id)}},{column:"credits",id:"credits",label:n("credits"),format:(e,t)=>{var a,i;return s(t.paymentables.filter(u=>u.credit_id!=null).reduce((u,r)=>u+r.amount,0),(a=t.client)==null?void 0:a.country_id,(i=t.client)==null?void 0:i.settings.currency_id)}},{column:"updated_at",id:"updated_at",label:n("updated_at"),format:e=>_(e,l)}],p=((C=d==null?void 0:d.react_table_columns)==null?void 0:C.payment)||W;return w.filter(e=>p.includes(e.column)).sort((e,t)=>p.indexOf(e.column)-p.indexOf(t.column))}export{Y as a,W as d,G as u};
