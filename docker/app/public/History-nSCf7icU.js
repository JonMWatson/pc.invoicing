import{u as b,a7 as C,a as $,cm as y,bO as N,d as k,g as _,br as w,f as B,b as F,j as a,C as H,b0 as S,S as T,D,l as q,h as x,i as z,H as A,bC as E,r as L,e as M}from"./bundle.D3-hVUGj.js";import{H as O}from"./History-BTuPZ_tO.js";import{A as P}from"./arrow-right-EvpM00SS.js";x.extend(E);const R=A.div`
  display: flex;
  background-color: ${l=>l.theme.backgroundColor};

  &:hover {
    background-color: ${l=>l.theme.hoverBackgroundColor};
  }
`;function Q(){var d,o;const[l]=b(),u=C(),i=$(),p=y(),{invoice:t}=p,{id:n}=N(),f=k(),h=_(),{timeFormat:j}=w(),{dateFormat:g}=B(),{data:e,isLoading:v}=F({queryKey:["/api/v1/invoices",n,"payments"],queryFn:()=>L("GET",M(`/api/v1/invoices/${n}?include=payments,activities.history&reminder_schedule=true`)).then(s=>s.data.data),enabled:!!n,staleTime:1/0});return a.jsx(H,{title:l("history"),className:"shadow-sm",style:{borderColor:i.$24},headerStyle:{borderColor:i.$20},withoutBodyPadding:!0,children:a.jsxs("div",{className:S("w-full px-2 pt-2",{"pb-10":(d=e==null?void 0:e.activities)==null?void 0:d.length,"pb-6":(e==null?void 0:e.activities)&&(e==null?void 0:e.activities.filter(({history:s})=>s==null?void 0:s.id).length)===0}),children:[v&&a.jsx("div",{className:"flex justify-center",children:a.jsx(T,{})}),a.jsxs("div",{children:[(e==null?void 0:e.activities)&&e.activities.filter(({history:s})=>s==null?void 0:s.id).length===0&&a.jsx("div",{className:"px-3 pt-3 text-sm",children:l("api_404")}),!!((o=e==null?void 0:e.activities)!=null&&o.length)&&a.jsx("div",{className:"flex flex-col w-full",children:(e==null?void 0:e.activities)&&e.activities.filter(({history:s})=>s==null?void 0:s.id).map(s=>{var r,c,m;return a.jsxs(R,{className:"flex items-center justify-start p-4 space-x-3 rounded-md cursor-pointer",onClick:()=>u(z("/activities/:id",{id:s.id})),theme:{backgroundColor:i.$1,hoverBackgroundColor:i.$25},children:[a.jsx("div",{className:"p-2 rounded-full",style:{backgroundColor:i.$20},children:a.jsx(O,{size:"1.3rem",color:i.$16,filledColor:i.$16})}),a.jsxs("div",{className:"flex flex-col items-start space-y-0.5 justify-center",children:[a.jsxs("div",{className:"flex space-x-1 text-sm",children:[a.jsx("span",{style:{color:i.$3},children:t!=null&&t.client?f(s.history.amount,(r=t==null?void 0:t.client)==null?void 0:r.country_id,(c=t==null?void 0:t.client)==null?void 0:c.settings.currency_id):null}),a.jsx("div",{children:a.jsx(P,{color:i.$17,size:"1.1rem"})}),a.jsx(D,{to:`/clients/${s.client_id}`,renderSpan:h("client",t==null?void 0:t.client),children:(m=t==null?void 0:t.client)==null?void 0:m.display_name})]}),a.jsxs("div",{className:"flex items-center space-x-1 text-xs",style:{color:i.$17},children:[a.jsx("span",{children:q(s.created_at,`${g} ${j}`)}),a.jsx("span",{children:x.unix(s.created_at).fromNow()})]})]})]},s.id)})})]})]})})}export{Q as default};
