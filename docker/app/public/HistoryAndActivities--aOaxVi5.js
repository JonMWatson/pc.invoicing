import{u as w,bO as g,a as b,c as C,cm as N,p as E,b as c,j as e,C as d,S as m,R as S,by as A,aG as O,r as y,e as x}from"./bundle.D3-hVUGj.js";import{E as P}from"./EmailRecord-zCEqxR7S.js";function q(){const[l]=w(),{id:s}=g(),a=b(),u=C(),p=N(),{displayName:h}=p,[n,f]=E.useState(!1),{data:o,isLoading:v}=c({queryKey:["/api/v1/activities/entity",s],queryFn:()=>y("POST",x("/api/v1/activities/entity"),{entity:"client",entity_id:s}).then(t=>t.data.data),enabled:s!==null,staleTime:1/0}),{data:r,isLoading:j}=c({queryKey:["/api/v1/clients",s,"emailHistory"],queryFn:()=>y("POST",x("/api/v1/emails/clientHistory/:id",{id:s})).then(t=>t.data),enabled:s!==null,staleTime:1/0});return e.jsxs("div",{className:"flex flex-col xl:flex-row gap-4 w-full",children:[e.jsx(d,{title:l("email_history"),className:"h-full relative shadow-sm w-full xl:w-1/2",headerClassName:"px-4 sm:px-6 py-[1.7rem]",withoutBodyPadding:!0,style:{borderColor:a.$24},withoutHeaderPadding:!0,headerStyle:{borderColor:a.$20},children:e.jsxs("div",{className:"px-4 sm:px-6 pb-6 pt-4",children:[j&&e.jsx(m,{}),e.jsx("div",{className:"flex flex-col overflow-y-auto max-h-96 space-y-4",children:r==null?void 0:r.map((t,i)=>t&&e.jsx(P,{emailRecord:t,index:i,withAllBorders:!0,withEntityNavigationIcon:!0},i))})]})}),e.jsx(d,{title:l("recent_activity"),className:"h-full relative shadow-sm w-full xl:w-1/2",topRight:e.jsxs("div",{className:"flex flex-col space-x-0 space-y-3 sm:space-y-0 sm:space-x-10 sm:flex-row items-end sm:items-center",children:[e.jsx(A,{label:l("comments_only"),checked:n,onValueChange:t=>f(t)}),e.jsx(O,{entity:"client",entityId:s,label:h})]}),withoutBodyPadding:!0,style:{borderColor:a.$24},headerStyle:{borderColor:a.$20},children:e.jsxs("div",{className:"px-4 sm:px-6 pb-6 pt-4",children:[v&&e.jsx(m,{}),e.jsx("div",{className:"flex flex-col overflow-y-auto max-h-96",children:o==null?void 0:o.filter(t=>n&&t.activity_type_id===141||!n).map((t,i)=>e.jsx(S.Fragment,{children:u(t)},i))})]})})]})}export{q as default};
