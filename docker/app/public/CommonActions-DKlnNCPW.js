import{u as E,b2 as R,y as I,a as M,p as _,j as a,aa as V,E as z,b5 as O,b6 as T,b7 as F,b8 as D,b9 as U,ab as B,bb as G,bc as A,r as H,e as W,$ as X,be as L,bf as Z,bU as J,bV as Q,bW as Y,aZ as K,bX as P}from"./bundle.D3-hVUGj.js";import{u as ee}from"./Actions-OZ_Df7fS.js";import{u as le}from"./hooks-DdpVpzmL.js";/**
 * Invoice Ninja (https://invoiceninja.com).
 *
 * @link https://github.com/invoiceninja/invoiceninja source repository
 *
 * @copyright Copyright (c) 2022. Invoice Ninja LLC (https://invoiceninja.com)
 *
 * @license https://www.elastic.co/licensing/elastic-license
 */function ae(){const[e]=E();return{invoice:[{value:"email_invoice",label:e("email_invoice")},{value:"view_pdf",label:e("view_pdf")},{value:"print_pdf",label:e("print_pdf")},{value:"schedule",label:e("schedule")},{value:"delivery_note",label:`${e("delivery_note")} ${e("pdf")}`},{value:"download",label:e("download")},{value:"download_e_invoice",label:e("download_e_invoice")},{value:"add_comment",label:e("add_comment")},{value:"mark_sent",label:e("mark_sent")},{value:"mark_paid",label:e("mark_paid")},{value:"auto_bill",label:e("auto_bill")},{value:"enter_payment",label:e("enter_payment")},{value:"client_portal",label:e("client_portal")},{value:"cancel_invoice",label:e("cancel_invoice")},{value:"reverse",label:e("reverse")},{value:"clone_to_invoice",label:e("clone_to_invoice")},{value:"clone_to_other",label:e("clone_to_other")},{value:"archive",label:e("archive")},{value:"restore",label:e("restore")},{value:"delete",label:e("delete")},{value:"run_template",label:e("run_template")}],credit:[{value:"email_credit",label:e("email_credit")},{value:"view_pdf",label:e("view_pdf")},{value:"print_pdf",label:e("print_pdf")},{value:"download_pdf",label:e("download_pdf")},{value:"download_e_credit",label:e("download_e_credit")},{value:"schedule",label:e("schedule")},{value:"add_comment",label:e("add_comment")},{value:"client_portal",label:e("client_portal")},{value:"apply_credit",label:e("apply_credit")},{value:"mark_sent",label:e("mark_sent")},{value:"mark_paid",label:e("mark_paid")},{value:"run_template",label:e("run_template")},{value:"clone_to_credit",label:e("clone_to_credit")},{value:"clone_to_other",label:e("clone_to_other")},{value:"archive",label:e("archive")},{value:"restore",label:e("restore")},{value:"delete",label:e("delete")}],quote:[{value:"view_pdf",label:e("view_pdf")},{value:"print_pdf",label:e("print_pdf")},{value:"download_pdf",label:e("download_pdf")},{value:"download_e_quote",label:e("download_e_quote")},{value:"schedule",label:e("schedule")},{value:"add_comment",label:e("add_comment")},{value:"email_quote",label:e("email_quote")},{value:"client_portal",label:e("client_portal")},{value:"mark_sent",label:e("mark_sent")},{value:"approve",label:e("approve")},{value:"convert_to_invoice",label:e("convert_to_invoice")},{value:"convert_to_project",label:e("convert_to_project")},{value:"run_template",label:e("run_template")},{value:"clone_to_quote",label:e("clone_to_quote")},{value:"clone_to_other",label:e("clone_to_other")},{value:"archive",label:e("archive")},{value:"restore",label:e("restore")},{value:"delete",label:e("delete")}],recurring_invoice:[{value:"view_pdf",label:e("view_pdf")},{value:"start",label:e("start")},{value:"stop",label:e("stop")},{value:"update_prices",label:e("update_prices")},{value:"increase_prices",label:e("increase_prices")},{value:"add_comment",label:e("add_comment")},{value:"clone_to_recurring",label:e("clone_to_recurring")},{value:"clone_to_other",label:e("clone_to_other")},{value:"archive",label:e("archive")},{value:"restore",label:e("restore")},{value:"delete",label:e("delete")}],purchase_order:[{value:"send_email",label:e("send_email")},{value:"view_pdf",label:e("view_pdf")},{value:"print_pdf",label:e("print_pdf")},{value:"schedule",label:e("schedule")},{value:"add_comment",label:e("add_comment")},{value:"download",label:e("download")},{value:"download_e_purchase_order",label:e("download_e_purchase_order")},{value:"mark_sent",label:e("mark_sent")},{value:"convert_to_expense",label:e("convert_to_expense")},{value:"add_to_inventory",label:e("add_to_inventory")},{value:"view_expense",label:`${e("view")} ${e("expense")}`},{value:"vendor_portal",label:e("vendor_portal")},{value:"clone_to_purchase_order",label:e("clone_to_purchase_order")},{value:"clone_to_other",label:e("clone_to_other")},{value:"run_template",label:e("run_template")},{value:"archive",label:e("archive")},{value:"restore",label:e("restore")},{value:"delete",label:e("delete")}]}}function te(e){var f,y;const[d]=E(),{entity:n,visible:u,setVisible:p}=e,g=R(),c=I(),i=M(),N=ae(),[o,b]=_.useState((y=(f=c==null?void 0:c.company_user)==null?void 0:f.react_settings)==null?void 0:y.common_actions),[S,w]=_.useState([]),v=N[n],[h,$]=_.useState(""),r=()=>{var l;return A.isEqual((l=c==null?void 0:c.company_user)==null?void 0:l.react_settings.common_actions,o)},m=l=>{var t;return((t=v.find(({value:s})=>s===l))==null?void 0:t.label)||""},C=()=>{const l=A.cloneDeep(c);A.set(l,"company_user.react_settings.common_actions",o),H("PUT",W("/api/v1/company_users/:id",{id:l.id}),l).then(t=>{A.set(l,"company_user",t.data.data),X(["company_users"]),g(L(l)),g(Z())})},k=l=>{const t=((o==null?void 0:o[n])||[]).filter(s=>l!==s);t&&b(s=>s&&{...s,[n]:t})},q=l=>{var s;const t=G(o==null?void 0:o[n],l.source.index,(s=l.destination)==null?void 0:s.index);b(x=>x&&{...x,[n]:t})},j=()=>{b(l=>{var t,s;return l?{...l,[n]:((s=(t=c==null?void 0:c.company_user)==null?void 0:t.react_settings.common_actions)==null?void 0:s[n])||[]}:{[n]:[]}})};return _.useEffect(()=>{if(h){const l=v.find(({value:t})=>h===t);l&&b(t=>t?{...t,[n]:[...t[n]||[],l.value]}:{[n]:[l.value]}),$("")}},[h]),_.useEffect(()=>{o&&o[n]?w(v.filter(({value:l})=>!(o[n]||[]).some(t=>t===l))):w(v)},[o]),a.jsx(V,{title:`${d(`${n}s`)} ${d("actions")} ${d("preferences")}`,visible:u,onClose:()=>{var l;p(!1),b((l=c==null?void 0:c.company_user)==null?void 0:l.react_settings.common_actions)},overflowVisible:!0,children:a.jsxs("div",{className:"flex flex-col space-y-4",children:[a.jsx(z,{className:"shadow-sm",label:d("actions"),value:h,onValueChange:l=>$(l),clearAfterSelection:!0,customSelector:!0,children:S.map(({label:l,value:t})=>a.jsx("option",{value:t,children:l},t))}),a.jsxs("div",{className:"flex flex-col space-y-2",children:[!!((o==null?void 0:o[n])||[]).length&&a.jsxs("span",{className:"font-medium",style:{color:i.$16},children:[d("selected")," ",d("actions")]}),!!((o==null?void 0:o[n])||[]).length&&a.jsx(O,{onDragEnd:q,children:a.jsx(T,{droppableId:"preference-actions",renderClone:(l,t,s)=>a.jsxs("div",{className:"flex items-center justify-between text-sm",...l.draggableProps,...l.dragHandleProps,ref:l.innerRef,children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(D,{size:"1.2rem",color:i.$17}),a.jsx("span",{className:"font-medium",children:m(((o==null?void 0:o[n])||[])[s.source.index])})]}),a.jsx("div",{children:a.jsx(U,{color:i.$16,hoverColor:i.$3,borderColor:i.$5,hoverBorderColor:i.$17,size:"1.6rem"})})]}),children:l=>a.jsxs("div",{className:"flex flex-col",...l.droppableProps,ref:l.innerRef,children:[((o==null?void 0:o[n])||[]).map((t,s)=>a.jsx(F,{draggableId:s.toString(),index:s,children:x=>_.createElement("div",{className:"flex items-center justify-between py-1.5",...x.draggableProps,ref:x.innerRef,key:s},a.jsxs("div",{className:"flex flex-1 items-center space-x-2 cursor-pointer",...x.dragHandleProps,children:[a.jsx("div",{children:a.jsx(D,{size:"1.2rem",color:i.$17})}),a.jsx("span",{className:"font-medium",children:m(t)})]}),a.jsx("div",{className:"cursor-pointer",onClick:()=>k(t),children:a.jsx(U,{color:i.$16,hoverColor:i.$3,borderColor:i.$5,hoverBorderColor:i.$17,size:"1.6rem"})}))},s)),l.placeholder]})})})]}),a.jsxs("div",{className:"flex space-x-2 justify-end",children:[a.jsx(B,{behavior:"button",type:"secondary",onClick:j,children:d("reset")}),a.jsx(B,{behavior:"button",onClick:()=>{C(),p(!1)},disabled:r(),disableWithoutIcon:!0,children:d("save")})]})]})})}function re(e){const[d]=E(),{resource:n,entity:u}=e,p=I(),g=M(),c=J({dropdown:!1}),i=le({dropdown:!1}),N=ee({dropdown:!1}),o=Q({dropdown:!1}),b=Y({dropdown:!1}),[S,w]=_.useState(!1),[v,h]=_.useState(),$=()=>u==="invoice"?N.filter(r=>typeof r=="function"):u==="credit"?i.filter(r=>typeof r=="function"):u==="quote"?c.filter(r=>typeof r=="function"):u==="recurring_invoice"?b.filter(r=>typeof r=="function"):u==="purchase_order"?o.filter(r=>typeof r=="function"):[];return _.useEffect(()=>{var m,C,k;const r=(k=(C=(m=p==null?void 0:p.company_user)==null?void 0:m.react_settings)==null?void 0:C.common_actions)==null?void 0:k[u];if(r){const q=$().filter(j=>{var f;return r.includes((f=j(n))==null?void 0:f.key)}).sort((j,f)=>{var y,l;return r.indexOf(String((y=j(n))==null?void 0:y.key)??"")-r.indexOf(String((l=f(n))==null?void 0:l.key)??"")});h(q)}},[p,n]),a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[v==null?void 0:v.map((r,m)=>a.jsx("div",{children:r(n)},m)),a.jsx(K,{width:"auto",message:d("quick_actions"),placement:"bottom",withoutArrow:!0,children:a.jsx("div",{className:"cursor-pointer",onClick:()=>w(!0),children:a.jsx(P,{size:"1.4rem",color:g.$3})})})]}),a.jsx(te,{entity:u,visible:S,setVisible:w})]})}export{re as C};
