import{u as j,e4 as D,j as o,aw as p,ax as I,dB as R,dC as B,e5 as P,e6 as T,bd as E,aF as F,e7 as y,e8 as h,bj as M,L as N,Y as U,g as V,p as _,e9 as G,bW as L,w as Q,ea as H,dl as O,dm as W,Z as k,Q as Y,k as Z,a2 as f,eb as q,a3 as z,a4 as J}from"./bundle.D3-hVUGj.js";import{I as K}from"./ImportButton-DQq538as.js";import{D as X}from"./DataTableColumnsPicker-nvfGKatE.js";import{r as $,a as ee,R as re}from"./RecurringInvoiceSlider-DDHrR-gI.js";import{u as oe}from"./useFooterColumns-BvgVpV--.js";import{D as ne}from"./DataTableFooterColumnsPicker-BzidH43y.js";import"./Import-4Hd9h9R0.js";import"./CloudPlay-Dnx8RJ-8.js";import"./History-BTuPZ_tO.js";import"./useSumTableColumn-CIYkE3cT.js";const ie=()=>{const[i]=j(),t=D(),c=M(),u=r=>r.flatMap(({documents:e})=>e.map(({id:n})=>n)),a=r=>r.some(({documents:e})=>e.length),s=r=>r.some(({is_deleted:e})=>!e),l=r=>r.some(({is_deleted:e})=>!e),d=r=>r.some(({is_deleted:e})=>!e),m=r=>r.every(({status_id:e})=>e===h.DRAFT||e===h.PAUSED),g=r=>r.every(({status_id:e})=>e===h.ACTIVE),v=(r,e)=>{const n=u(r);c(n,"download"),e([])};return[({selectedIds:r,selectedResources:e,setSelected:n})=>e&&m(e)&&o.jsx(p,{onClick:()=>{t(r,"start"),n([])},icon:o.jsx(I,{element:R}),children:i("start")}),({selectedIds:r,selectedResources:e,setSelected:n})=>e&&g(e)&&o.jsx(p,{onClick:()=>{t(r,"stop"),n([])},icon:o.jsx(I,{element:B}),children:i("stop")}),({selectedIds:r,selectedResources:e,setSelected:n})=>e&&l(e)&&o.jsx(P,{selectedIds:r,setSelected:n,dropdown:!0}),({selectedIds:r,selectedResources:e,setSelected:n})=>e&&d(e)&&o.jsx(T,{selectedIds:r,setSelected:n,dropdown:!0}),({selectedResources:r,setSelected:e})=>r&&s(r)&&o.jsx(p,{onClick:()=>a(r)?v(r,e):E.error("no_documents_to_download"),icon:o.jsx(I,{element:F}),children:i("documents")}),({selectedIds:r,setSelected:e})=>o.jsx(y,{entity:"recurring_invoice",resourceIds:r,setSelected:e})]};function pe(){N("recurring_invoices");const[i]=j(),t=U(),c=V(),[u,a]=_.useState(""),{data:s}=G({id:u}),l=[{name:i("recurring_invoices"),href:"/recurring_invoices"}],d=L(),m=Q(),g=H(),v=O(),x=ie(),{footerColumns:r,allFooterColumns:e}=oe(),n=W(),[w,A]=k($),[S,b]=k(ee);return _.useEffect(()=>{s&&S&&A(s)},[s,S]),_.useEffect(()=>()=>b(!1),[]),o.jsxs(Y,{title:i("recurring_invoices"),breadcrumbs:l,docsLink:"en/recurring-invoices/",children:[o.jsx(Z,{resource:"recurring_invoice",columns:v,footerColumns:r,endpoint:"/api/v1/recurring_invoices?include=client&without_deleted_clients=true&sort=id|desc",linkToCreate:"/recurring_invoices/create",linkToEdit:"/recurring_invoices/:id/edit",bulkRoute:"/api/v1/recurring_invoices/bulk",customActions:d,customFilters:g,customBulkActions:x,customFilterPlaceholder:"status",withResourcefulActions:!0,rightSide:o.jsxs("div",{className:"flex items-center space-x-2",children:[!!m.show_table_footer&&o.jsx(ne,{table:"recurringInvoice",columns:e}),o.jsx(X,{columns:n,defaultColumns:q,table:"recurringInvoice"}),o.jsx(z,{type:"component",guards:[J(f("create_recurring_invoice"),f("edit_recurring_invoice"))],component:o.jsx(K,{route:"/recurring_invoices/import"})})]}),linkToCreateGuards:[f("create_recurring_invoice")],hideEditableOptions:!t("edit_recurring_invoice"),onTableRowClick:C=>{a(C.id),b(!0)},enableSavingFilterPreference:!0}),!c("recurring_invoice",w)&&o.jsx(re,{})]})}export{pe as default};
