import{L as R,bO as C,ey as D,Y as E,bp as B,p as r,u as N,i,j as e,bP as k,a1 as F,Q as L,dW as O,bR as V,bS as _,a5 as w,a6 as I,bA as Q,bd as u,r as U,e as $,$ as q}from"./bundle.D3-hVUGj.js";import{a as H}from"./hooks-Dps_clU3.js";import{P as M}from"./PreviousNextNavigation-BpWEW6Fs.js";import"./atoms-CQqBLmIS.js";function J(){const{documentTitle:p,setDocumentTitle:f}=R("project"),{id:o}=C(),{data:t}=D({id:o}),l=E(),h=B(),x=H(),[g,c]=r.useState(),[m,d]=r.useState(!1),[s,j]=r.useState(),[n]=N();r.useEffect(()=>{t!=null&&t.name&&f(t.name),t&&j(t)},[t]);const T=[{name:n("projects"),href:"/projects"},{name:p,href:i("/projects/:id",{id:o})}],v=[{name:n("edit"),href:i("/projects/:id/edit",{id:o})},{name:n("documents"),href:i("/projects/:id/documents",{id:o}),enabled:l("view_project")||l("edit_project")||h(s),formatName:()=>{var a;return e.jsx(k,{numberOfDocuments:(a=s==null?void 0:s.documents)==null?void 0:a.length})}}],y=()=>{m||(u.processing(),c(void 0),d(!0),U("PUT",$("/api/v1/projects/:id",{id:o}),s).then(()=>{u.success("updated_project"),q(["projects"])}).catch(a=>{var b;((b=a.response)==null?void 0:b.status)==422&&(u.dismiss(),c(a.response.data))}).finally(()=>{d(!1)}))},{changeTemplateVisible:P,setChangeTemplateVisible:S,changeTemplateResources:A}=F();return e.jsxs(L,{title:p,breadcrumbs:T,navigationTopRight:s&&e.jsx(Q,{resource:s,onSaveClick:y,actions:x,cypressRef:"projectActionDropdown",disableSaveButton:!s||m}),afterBreadcrumbs:e.jsx(M,{entity:"project"}),children:[e.jsxs(O,{breadcrumbs:[],children:[e.jsx(V,{tabs:v}),e.jsx(_,{context:{errors:g,setErrors:c,project:s,setProject:j}})]}),e.jsx(w,{entity:"project",entities:A,visible:P,setVisible:S,labelFn:a=>e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx(I,{children:n("number")}),e.jsx("span",{children:a.number})]}),bulkUrl:"/api/v1/projects/bulk"})]})}export{J as default};
