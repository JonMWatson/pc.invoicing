import{u as A,bE as G,j as a,B as m,bq as W,bI as q,bJ as I,bd as T,r as S,e as Q,$,b as B,Y as K,g as X,f as J,d as Z,aT as ee,w as te,aV as ae,aW as V,l as h,D as g,i as j,dy as ne,aZ as M,a_ as O,a$ as Y,b0 as k,aY as se,di as w,dj as oe,a7 as re,ac as H,dz as ie,dA as le,ap as de,aw as f,ax as x,dB as ce,dC as _e,az as D,ai as P,aB as y,aC as C,aP as ue,aQ as me,aR as fe,h as L}from"./bundle.D3-hVUGj.js";/**
 * Invoice Ninja (https://invoiceninja.com).
 *
 * @link https://github.com/invoiceninja/invoiceninja source repository
 *
 * @copyright Copyright (c) 2022. Invoice Ninja LLC (https://invoiceninja.com)
 *
 * @license https://www.elastic.co/licensing/elastic-license
 */var _=(e=>(e.FREQUENCY_DAILY="1",e.FREQUENCY_WEEKLY="2",e.FREQUENCY_TWO_WEEKS="3",e.FREQUENCY_FOUR_WEEKS="4",e.FREQUENCY_MONTHLY="5",e.FREQUENCY_TWO_MONTHS="6",e.FREQUENCY_THREE_MONTHS="7",e.FREQUENCY_FOUR_MONTHS="8",e.FREQUENCY_SIX_MONTHS="9",e.FREQUENCY_ANNUALLY="10",e.FREQUENCY_TWO_YEARS="11",e.FREQUENCY_THREE_YEARS="12",e))(_||{});/**
 * Invoice Ninja (https://invoiceninja.com).
 *
 * @link https://github.com/invoiceninja/invoiceninja source repository
 *
 * @copyright Copyright (c) 2022. Invoice Ninja LLC (https://invoiceninja.com)
 *
 * @license https://www.elastic.co/licensing/elastic-license
 */const xe={[_.FREQUENCY_ANNUALLY]:"freq_annually",[_.FREQUENCY_DAILY]:"freq_daily",[_.FREQUENCY_FOUR_MONTHS]:"freq_four_months",[_.FREQUENCY_FOUR_WEEKS]:"freq_four_weeks",[_.FREQUENCY_MONTHLY]:"freq_monthly",[_.FREQUENCY_SIX_MONTHS]:"freq_six_months",[_.FREQUENCY_THREE_MONTHS]:"freq_three_months",[_.FREQUENCY_THREE_YEARS]:"freq_three_years",[_.FREQUENCY_TWO_MONTHS]:"freq_two_months",[_.FREQUENCY_TWO_WEEKS]:"freq_two_weeks",[_.FREQUENCY_TWO_YEARS]:"freq_two_years",[_.FREQUENCY_WEEKLY]:"freq_weekly"};/**
 * Invoice Ninja (https://invoiceninja.com).
 *
 * @link https://github.com/invoiceninja/invoiceninja source repository
 *
 * @copyright Copyright (c) 2022. Invoice Ninja LLC (https://invoiceninja.com)
 *
 * @license https://www.elastic.co/licensing/elastic-license
 */var u=(e=>(e.Draft="1",e.Active="2",e.Paused="3",e.Completed="4",e.Pending="-1",e))(u||{});function pe(e){const[s]=A(),{recurringExpense:r}=e,i=G(),{is_deleted:d,archived_at:l,status_id:c}=r;return d?a.jsx(m,{variant:"red",children:s("deleted")}):l?a.jsx(m,{variant:"orange",children:s("archived")}):u.Draft===c?a.jsx(m,{variant:"generic",children:s("draft")}):u.Active===c?a.jsx(m,{variant:"blue",style:{backgroundColor:i.$3},children:s("active")}):u.Paused===c?a.jsx(m,{variant:"yellow",children:s("paused")}):u.Pending===c?a.jsx(m,{variant:"light-blue",style:{backgroundColor:i.$2},children:s("pending")}):u.Completed===c?a.jsx(m,{variant:"green",style:{backgroundColor:i.$1},children:s("completed")}):a.jsx(a.Fragment,{})}/**
 * Invoice Ninja (https://invoiceninja.com).
 *
 * @link https://github.com/invoiceninja/invoiceninja source repository
 *
 * @copyright Copyright (c) 2022. Invoice Ninja LLC (https://invoiceninja.com)
 *
 * @license https://www.elastic.co/licensing/elastic-license
 */function Ne(e){const s=K();return B(["/api/v1/recurring_expenses","create"],()=>S("GET",Q("/api/v1/recurring_expenses/create")).then(r=>r.data.data),{enabled:s("create_recurring_expense")?e.enabled??!0:!1,staleTime:1/0})}function ge(e){return B(["/api/v1/recurring_expenses",e.id],()=>S("GET",Q("/api/v1/recurring_expenses/:id",{id:e.id})).then(s=>s.data.data),{enabled:e.enabled??!0,staleTime:1/0})}const he={start:"started_recurring_expense",stop:"stopped_recurring_expense"},be=()=>{const e=W(),s=q(I);return(r,i)=>{T.processing(),S("POST",Q("/api/v1/recurring_expenses/bulk"),{action:i,ids:r}).then(()=>{const d=he[i]||`${i}d_recurring_expense`;T.success(d),s&&e.invalidateQueries([s]),$(["recurring_expenses"])})}},Ee=["status","number","vendor","client","date","frequency","next_send_date","remaining_cycles","amount","public_notes","entity_state"];function ye(){const[e,s,r,i]=V({entity:"expense"});return["status","number","vendor","client","date","amount","public_notes","entity_state","archived_at","created_at","created_by",e,s,r,i,"documents","exchange_rate","is_deleted","net_amount","payment_date","payment_type","private_notes","should_be_invoiced","tax_name1","tax_name2","tax_name3","tax_rate1","tax_rate2","tax_rate3","transaction_reference","updated_at","frequency","remaining_cycles","next_send_date"]}function je(){var F;const[e]=A(),s=X(),{dateFormat:r}=J(),i=Z(),d=ee(),l=te(),c=ae(),p=ne();ye();const[v,N,R,o]=V({entity:"expense"}),z=[{column:"status",id:"status_id",label:e("status"),format:(t,n)=>a.jsx(g,{to:j("/recurring_expenses/:id/edit",{id:n.id}),renderSpan:s("recurring_expense",n),children:a.jsx(pe,{recurringExpense:n})})},{column:"number",id:"number",label:e("number"),format:(t,n)=>a.jsx(g,{to:j("/recurring_expenses/:id/edit",{id:n.id}),renderSpan:s("recurring_expense",n),children:t})},{column:"vendor",id:"vendor_id",label:e("vendor"),format:(t,n)=>n.vendor&&a.jsx(g,{to:j("/vendors/:id",{id:t.toString()}),renderSpan:s("vendor",n.vendor),children:n.vendor.name})},{column:"client",id:"client_id",label:e("client"),format:(t,n)=>n.client&&a.jsx(g,{to:j("/clients/:id",{id:t.toString()}),renderSpan:s("client",n.client),children:n.client.display_name})},{column:"date",id:"date",label:e("date"),format:t=>h(t,r)},{column:"amount",id:"amount",label:e("amount"),format:(t,n)=>{var b,E;return i(p(n),(b=n.client)==null?void 0:b.country_id,n.currency_id||((E=n.client)==null?void 0:E.settings.currency_id))}},{column:"public_notes",id:"public_notes",label:e("public_notes"),format:t=>a.jsx(M,{width:"auto",tooltipElement:a.jsx("div",{className:"w-full max-h-48 overflow-auto whitespace-normal break-all",children:a.jsx("article",{className:k("prose prose-sm",{"prose-invert":!(l!=null&&l.dark_mode)}),dangerouslySetInnerHTML:{__html:Y(t)}})}),children:a.jsx("span",{children:O(Y(t)).slice(0,50)})})},{column:"entity_state",id:"id",label:e("entity_state"),format:(t,n)=>a.jsx(se,{entity:n})},{column:"archived_at",id:"archived_at",label:e("archived_at"),format:t=>h(t,r)},{column:"created_at",id:"created_at",label:e("created_at"),format:t=>h(t,r)},{column:v,id:"custom_value1",label:v,format:t=>c("expense1",t==null?void 0:t.toString())},{column:N,id:"custom_value2",label:N,format:t=>c("expense2",t==null?void 0:t.toString())},{column:R,id:"custom_value3",label:R,format:t=>c("expense3",t==null?void 0:t.toString())},{column:o,id:"custom_value4",label:o,format:t=>c("expense4",t==null?void 0:t.toString())},{column:"documents",id:"documents",label:e("documents"),format:(t,n)=>n.documents.length},{column:"exchange_rate",id:"exchange_rate",label:e("exchange_rate"),format:t=>d(t)},{column:"is_deleted",id:"is_deleted",label:e("is_deleted"),format:(t,n)=>n.is_deleted?e("yes"):e("no")},{column:"net_amount",id:"amount",label:e("net_amount"),format:(t,n)=>{var b,E;return i(t,(b=n.client)==null?void 0:b.country_id,n.currency_id||((E=n.client)==null?void 0:E.settings.currency_id))}},{column:"payment_date",id:"payment_date",label:e("payment_date"),format:t=>h(t,r)},{column:"payment_type",id:"payment_type_id",label:e("payment_type"),format:t=>a.jsx(w,{for:oe,code:t,headless:!0})},{column:"private_notes",id:"private_notes",label:e("private_notes"),format:t=>a.jsx(M,{width:"auto",tooltipElement:a.jsx("div",{className:"w-full max-h-48 overflow-auto whitespace-normal break-all",children:a.jsx("article",{className:k("prose prose-sm",{"prose-invert":!(l!=null&&l.dark_mode)}),dangerouslySetInnerHTML:{__html:Y(t)}})}),children:a.jsx("span",{children:O(Y(t)).slice(0,50)})})},{column:"should_be_invoiced",id:"should_be_invoiced",label:e("should_be_invoiced"),format:t=>e(t?"yes":"no")},{column:"tax_name1",id:"tax_name1",label:e("tax_name1")},{column:"tax_name2",id:"tax_name2",label:e("tax_name2")},{column:"tax_name3",id:"tax_name3",label:e("tax_name3")},{column:"tax_rate1",id:"tax_rate1",label:e("tax_rate1"),format:t=>d(t)},{column:"tax_rate2",id:"tax_rate2",label:e("tax_rate2"),format:t=>d(t)},{column:"tax_rate3",id:"tax_rate3",label:e("tax_rate3"),format:t=>d(t)},{column:"transaction_reference",id:"transaction_reference",label:e("transaction_reference")},{column:"updated_at",id:"updated_at",label:e("updated_at"),format:t=>h(t,r)},{column:"frequency",id:"frequency_id",label:e("frequency"),format:t=>a.jsx(w,{for:xe,code:t,headless:!0})},{column:"next_send_date",id:"next_send_date",label:e("next_send_date"),format:t=>h(t,r)},{column:"remaining_cycles",id:"remaining_cycles",label:e("remaining_cycles"),format:t=>t.toString()==="-1"?a.jsx("span",{children:e("endless")}):a.jsx("span",{children:t})}],U=((F=l==null?void 0:l.react_table_columns)==null?void 0:F.recurringExpense)||Ee;return z.filter(t=>U.includes(t.column)).sort((t,n)=>U.indexOf(t.column)-U.indexOf(n.column))}function Ce(){const e=W(),s=q(I);return(r,i)=>{T.processing(),S("PUT",Q(i==="start"?"/api/v1/recurring_expenses/:id?start=true":"/api/v1/recurring_expenses/:id?stop=true",{id:r.id}),r).then(()=>{$(["recurring_expenses"]),s&&e.invalidateQueries([s]),T.success(i==="start"?"start":"stop")})}}function Ye(){const[e]=A(),s=re(),r=K(),i=H(ie),d=H(le),l=Ce(),c=be(),{isEditPage:p}=de({entity:"recurring_expense",editPageTabs:["documents"]}),v=o=>{d({...o,id:"",documents:[],number:"",date:L().format("YYYY-MM-DD")}),s("/recurring_expenses/create?action=clone")},N=o=>{i({...o,id:"",documents:[],number:"",date:L().format("YYYY-MM-DD")}),s("/expenses/create?action=clone")};return[o=>(o.status_id===u.Draft||o.status_id===u.Paused)&&a.jsx(f,{onClick:()=>l(o,"start"),icon:a.jsx(x,{element:ce}),children:e("start")}),o=>o.status_id===u.Active&&a.jsx(f,{onClick:()=>l(o,"stop"),icon:a.jsx(x,{element:_e}),children:e("stop")}),()=>a.jsx(D,{withoutPadding:!0}),o=>r("create_recurring_expense")&&a.jsx(f,{onClick:()=>v(o),icon:a.jsx(x,{element:P}),children:e("clone")}),o=>r("create_expense")&&a.jsx(f,{onClick:()=>N(o),icon:a.jsx(x,{element:P}),children:e("clone_to_expense")}),()=>p&&a.jsx(D,{withoutPadding:!0}),o=>p&&y(o)===C.Active&&a.jsx(f,{onClick:()=>c([o.id],"archive"),icon:a.jsx(x,{element:ue}),children:e("archive")}),o=>p&&(y(o)===C.Archived||y(o)===C.Deleted)&&a.jsx(f,{onClick:()=>c([o.id],"restore"),icon:a.jsx(x,{element:me}),children:e("restore")}),o=>p&&(y(o)===C.Active||y(o)===C.Archived)&&a.jsx(f,{onClick:()=>c([o.id],"delete"),icon:a.jsx(x,{element:fe}),children:e("delete")})]}function Te(e){const{setRecurringExpense:s,setErrors:r}=e;return(i,d)=>{r(void 0),s(l=>l&&{...l,[i]:d})}}export{u as R,Ye as a,ge as b,be as c,ye as d,Ee as e,Ne as f,_ as g,Te as h,pe as i,xe as j,je as u};
