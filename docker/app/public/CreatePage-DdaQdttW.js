import{cm as y,bK as P,a as w,w as L,j as e,C as S,cp as T,c9 as s,S as D}from"./bundle.D3-hVUGj.js";import{C as F}from"./ClientSelector-DtB3q7fn.js";import{u as b,I as k,a as N}from"./useProductColumns-BqpEcmPs.js";import{e as R}from"./hooks-DdpVpzmL.js";import{C as U,a as B}from"./CreditFooter-g7_eypts.js";import"./ClientActionButtons-YTWpr-RA.js";import"./InvoiceViewer-CknzAqf8.js";import"./CreditStatus-DFPZx7rF.js";import"./useInvoiceColumns-YKQxY9Gc.js";import"./InvoiceStatus-CQhnxHGD.js";import"./invoice-status-We6cAxTk.js";function J(){const r=y(),{credit:i,isDefaultFooter:c,isDefaultTerms:l,errors:n,client:m,invoiceSum:d,setIsDefaultFooter:p,setIsDefaultTerms:C}=r,[u]=P(),h=w(),a=L(),x=b(),{handleChange:o,handleInvitationChange:g,handleLineItemChange:I,handleLineItemPropertyChange:f,handleCreateLineItem:j,handleDeleteLineItem:_}=R({client:m});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-12 gap-4",children:[e.jsx(S,{className:"col-span-12 xl:col-span-4 h-max shadow-sm",withContainer:!0,style:{borderColor:h.$24},children:e.jsx(F,{resource:i,onChange:t=>o("client_id",t),onLocationChange:t=>o("location_id",t),onClearButtonClick:()=>{o("client_id",""),o("location_id","")},onContactCheckboxChange:g,errorMessage:n==null?void 0:n.errors.client_id,disableWithSpinner:u.get("action")==="create"})}),e.jsx(U,{handleChange:o,errors:n}),e.jsx("div",{className:"col-span-12",children:i?e.jsx(T,{type:"product",resource:i,items:i.line_items.filter(t=>[s.Product,s.UnpaidFee,s.PaidFee,s.LateFee].includes(t.type_id)),columns:x,relationType:"client_id",onLineItemChange:I,onSort:t=>o("line_items",t),onLineItemPropertyChange:f,onCreateItemClick:j,onDeleteRowClick:_}):e.jsx(D,{})}),e.jsx(B,{handleChange:o,errors:n,isDefaultFooter:c,isDefaultTerms:l,setIsDefaultFooter:p,setIsDefaultTerms:C}),i&&e.jsx(k,{relationType:"client_id",resource:i,invoiceSum:d,onChange:(t,v)=>o(t,v)})]}),(a==null?void 0:a.show_pdf_preview)&&e.jsx("div",{className:"my-4",children:i&&e.jsx(N,{for:"create",resource:i,entity:"credit",relationType:"client_id",endpoint:"/api/v1/live_preview?entity=:entity"})})]})}export{J as default};
