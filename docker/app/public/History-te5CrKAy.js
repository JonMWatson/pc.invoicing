import{u as j,bO as g,a as b,br as $,f as C,a7 as N,d as y,g as k,b as _,j as s,C as w,b0 as B,S as F,bl as S,D as T,l as D,h as m,i as H,H as q,bC as z,r as E,e as L}from"./bundle.D3-hVUGj.js";import{H as M}from"./History-BTuPZ_tO.js";const P=q.div`
  display: flex;
  background-color: ${t=>t.theme.backgroundColor};

  &:hover {
    background-color: ${t=>t.theme.hoverBackgroundColor};
  }
`;m.extend(z);function G(){var l,d;const[t]=j(),{id:n}=g(),i=b(),{timeFormat:x}=$(),{dateFormat:v}=C(),p=N(),h=y(),f=k(),{data:e,isLoading:u}=_({queryKey:["/api/v1/purchase_orders",n,"history"],queryFn:()=>E("GET",L(`/api/v1/purchase_orders/${n}?include=vendor,activities.history&reminder_schedule=true`)).then(a=>a.data.data),enabled:!!n,staleTime:1/0});return s.jsx(w,{title:t("history"),className:"shadow-sm",style:{borderColor:i.$24},headerStyle:{borderColor:i.$20},withoutBodyPadding:!0,children:s.jsxs("div",{className:B("w-full px-2 pt-2",{"pb-10":(l=e==null?void 0:e.activities)==null?void 0:l.length,"pb-6":(e==null?void 0:e.activities)&&(e==null?void 0:e.activities.filter(({history:a})=>a==null?void 0:a.id).length)===0}),children:[u&&s.jsx("div",{className:"flex justify-center",children:s.jsx(F,{})}),s.jsxs("div",{children:[(e==null?void 0:e.activities)&&e.activities.filter(({history:a})=>a==null?void 0:a.id).length===0&&s.jsx("div",{className:"px-3 pt-3 text-sm",children:t("api_404")}),!!((d=e==null?void 0:e.activities)!=null&&d.length)&&s.jsx("div",{className:"flex flex-col w-full",children:(e==null?void 0:e.activities)&&e.activities.filter(({history:a})=>a==null?void 0:a.id).map(a=>{var o,r,c;return s.jsxs(P,{className:"flex items-center justify-start p-4 space-x-3 rounded-md cursor-pointer",onClick:()=>p(H("/activities/:id",{id:a.id})),theme:{backgroundColor:i.$1,hoverBackgroundColor:i.$25},children:[s.jsx("div",{className:"p-2 rounded-full",style:{backgroundColor:i.$20},children:s.jsx(M,{size:"1.3rem",color:i.$16,filledColor:i.$16})}),s.jsxs("div",{className:"flex flex-col items-start space-y-0.5 justify-center",children:[s.jsxs("div",{className:"flex space-x-1 text-sm",children:[s.jsx("span",{style:{color:i.$3},children:e!=null&&e.vendor?h(a.history.amount,(o=e==null?void 0:e.vendor)==null?void 0:o.country_id,(r=e==null?void 0:e.vendor)==null?void 0:r.currency_id):null}),s.jsx("div",{children:s.jsx(S,{color:i.$17,size:"1.1rem"})}),s.jsx(T,{to:`/vendors/${a.vendor_id}`,renderSpan:f("vendor",e==null?void 0:e.vendor),children:(c=e==null?void 0:e.vendor)==null?void 0:c.name})]}),s.jsxs("div",{className:"flex items-center space-x-1 text-xs",style:{color:i.$17},children:[s.jsx("span",{children:D(a.created_at,`${v} ${x}`)}),s.jsx("span",{children:m.unix(a.created_at).fromNow()})]})]})]},a.id)})})]})]})})}export{G as default};
