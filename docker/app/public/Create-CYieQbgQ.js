import{u as x,L as B,a7 as w,bK as E,bL as k,i as g,p as n,cW as L,j as r,Q as P,cX as F,bR as N,bS as O,bc as Q,bd as l,r as R,e as $,$ as q}from"./bundle.D3-hVUGj.js";/**
 * Invoice Ninja (https://invoiceninja.com).
 *
 * @link https://github.com/invoiceninja/invoiceninja source repository
 *
 * @copyright Copyright (c) 2022. Invoice Ninja LLC (https://invoiceninja.com)
 *
 * @license https://www.elastic.co/licensing/elastic-license
 */function A(){const[s]=x();return[{name:s("create"),href:"/clients/create"},{name:s("settings"),href:"/clients/create/settings"},{name:s("documents"),href:"/clients/create/documents"},{name:s("locations"),href:"/clients/create/locations"}]}function H(){var h,_;const{documentTitle:s}=B("new_client"),[t]=x(),v=w(),[S]=E(),y=k(),C=[{name:t("clients"),href:"/clients"},{name:t("new_client"),href:g("/clients/create")}],[a,c]=n.useState(),[d,m]=n.useState(!1),[e,f]=n.useState(),[i,T]=n.useState([{first_name:"",last_name:"",email:"",phone:"",send_email:!1}]),j=A(),{data:u}=L({});n.useEffect(()=>{u&&f({...u.data,group_settings_id:S.get("group")||""})},[u]);const p=async()=>{if(!d){if(Q.set(e,"contacts",i),l.processing(),c(void 0),!((e==null?void 0:e.name)!=""||i[0].first_name!=""||i[0].last_name!=""))return c({message:t("invalid_name // needs translation"),errors:{name:[t("please_enter_a_client_or_contact_name")]}}),l.error(),p;m(!0),await y({excludeToasters:!0}),R("POST",$("/api/v1/clients"),e).then(o=>{l.success("created_client"),q(["clients"]),v(g("/clients/:id",{id:o.data.data.id}))}).catch(o=>{var b;((b=o.response)==null?void 0:b.status)===422&&(c(o.response.data),l.dismiss())}).finally(()=>m(!1))}};return r.jsxs(P,{title:s,breadcrumbs:C,onSaveClick:p,disableSaveButton:d,children:[a?r.jsx(F,{errors:a,entity:"client",withoutTopMessage:!!((h=a.errors)!=null&&h.id),withoutListBullets:!!((_=a.errors)!=null&&_.id)}):null,e&&r.jsxs("div",{className:"space-y-4",children:[r.jsx(N,{tabs:j}),r.jsx(O,{context:{errors:a,setErrors:c,client:e,setClient:f,contacts:i,setContacts:T}})]})]})}export{H as default};
