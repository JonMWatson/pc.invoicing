import{u as b,a as j,Z as x,d$ as C,e0 as P,j as t,C as g,e1 as E,L as $,a7 as w,e2 as B,p as u,bK as T,bc as _,Q as D,dW as F,S as k,r as A,e as N,$ as Q,bd as h,i as q}from"./bundle.D3-hVUGj.js";function H(r){const[o]=b(),s=j(),[n,c]=x(C),a=P({setErrors:r.setErrors,setProduct:c});return t.jsx(g,{title:o("new_product"),className:"shadow-sm",style:{borderColor:s.$24},headerStyle:{borderColor:s.$20},children:n&&t.jsx(E,{errors:r.errors,handleChange:a,product:n})})}function K(){const{documentTitle:r}=$("new_product"),[o]=b(),[s,n]=x(C),c=w(),{data:a}=B({enabled:typeof s>"u"}),S=[{name:o("products"),href:"/products"},{name:o("new_product"),href:"/products/create"}],[i,l]=u.useState(!1),[v,p]=u.useState(),[f]=T(),y=d=>{d.preventDefault(),i||(l(!0),A("POST",N("/api/v1/products"),s).then(e=>{Q(["products"]),h.success("created_product"),c(q("/products/:id/edit",{id:e.data.data.id}))}).catch(e=>{var m;((m=e.response)==null?void 0:m.status)===422&&(p(e.response.data),h.dismiss())}).finally(()=>l(!1)))};return u.useEffect(()=>{n(d=>{let e=d;return f.get("action")!=="clone"&&(e=void 0),typeof a<"u"&&typeof e>"u"&&f.get("action")!=="clone"&&(e=_.cloneDeep(a)),e})},[a]),t.jsx(D,{title:r,breadcrumbs:S,disableSaveButton:!s||i,onSaveClick:y,children:t.jsx(F,{breadcrumbs:[],children:s?t.jsx(H,{errors:v,setErrors:p}):t.jsx(k,{})})})}export{K as default};
