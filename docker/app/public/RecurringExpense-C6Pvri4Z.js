import{u as v,L as E,Y as R,bp as P,bO as A,i as u,j as s,bP as B,p as t,Q as D,bR as N,bS as I,S as O,bA as F,bd as c,r as L,e as Q,$}from"./bundle.D3-hVUGj.js";import{a as k,b as q}from"./hooks-CvK-xUg4.js";import{P as w}from"./PreviousNextNavigation-BpWEW6Fs.js";function Y(){const[n]=v(),{documentTitle:g}=E("edit_recurring_expense"),_=R(),b=P(),l=k(),{id:r}=A(),{data:a}=q({id:r}),y=[{name:n("recurring_expenses"),href:"/recurring_expenses"},{name:n("edit_recurring_expense"),href:u("/recurring_expenses/:id",{id:r})}],h=[{name:n("edit"),href:u("/recurring_expenses/:id/edit",{id:r})},{name:n("documents"),href:u("/recurring_expenses/:id/documents",{id:r}),formatName:()=>s.jsx(B,{numberOfDocuments:e==null?void 0:e.documents.length})}],[e,o]=t.useState(),[j,p]=t.useState("by_rate"),[S,i]=t.useState(),[d,x]=t.useState(!1);t.useEffect(()=>{a&&(o(a),p(a.calculate_tax_by_amount?"by_amount":"by_rate"))},[a]);const T=()=>{d||(c.processing(),i(void 0),x(!0),L("PUT",Q("/api/v1/recurring_expenses/:id",{id:e.id}),e).then(()=>{c.success("updated_recurring_expense"),$(["recurring_expenses"])}).catch(m=>{var f;((f=m.response)==null?void 0:f.status)===422&&(i(m.response.data),c.dismiss())}).finally(()=>x(!1)))};return s.jsx(D,{title:g,breadcrumbs:y,...(_("edit_recurring_expense")||b(e))&&e&&{navigationTopRight:s.jsx(F,{resource:e,actions:l,onSaveClick:T,disableSaveButton:!e||d,cypressRef:"recurringExpenseActionDropdown"})},afterBreadcrumbs:s.jsx(w,{entity:"recurring_expense"}),children:e?s.jsxs("div",{className:"space-y-4",children:[s.jsx(N,{tabs:h}),s.jsx(I,{context:{errors:S,setErrors:i,recurringExpense:e,setRecurringExpense:o,taxInputType:j,setTaxInputType:p}})]}):s.jsx(O,{})})}export{Y as default};
