import{u as g,a7 as j,a as k,t as B,L as E,p as e,j as n,Q as $,dW as w,C as F,bd as i,r as A,e as D,$ as N,i as Q}from"./bundle.D3-hVUGj.js";import{c as R,A as q}from"./transactions-09IVy-b-.js";import{u as H}from"./useResolveCurrencySeparator-ygcSKMxa.js";import{u as I,T as L}from"./useHandleChange-fmKramJB.js";function G(){const[u]=g(),h=j(),d=k(),a=B(),{data:o}=R(),b=H(),{documentTitle:l}=E("new_transaction"),[p,f]=e.useState(!1),[m,y]=e.useState(),[v,c]=e.useState(),[s,C]=e.useState(),T=I({setTransaction:C,setCurrencySeparators:y,setErrors:c}),_=[{name:u("transactions"),href:"/transactions"},{name:u("new_transaction"),href:"/transactions/create"}],x=async t=>{t.preventDefault(),!p&&(i.processing(),c(void 0),f(!0),A("POST",D("/api/v1/bank_transactions"),s).then(r=>{i.success("created_transaction"),N(["bank_transactions"]),h(Q("/transactions/:id/edit",{id:r.data.data.id}))}).catch(r=>{var S;((S=r.response)==null?void 0:S.status)===422&&(c(r.response.data),i.dismiss())}).finally(()=>f(!1)))};return e.useEffect(()=>{if(!s)o&&C({...o,base_type:q.Credit,currency_id:a==null?void 0:a.settings.currency_id});else{const t=b(s.currency_id);t&&y(t)}},[a,s,o]),n.jsx($,{title:l,breadcrumbs:_,disableSaveButton:!s||p,onSaveClick:x,children:n.jsx(w,{breadcrumbs:[],children:n.jsx(F,{title:l,className:"shadow-sm",style:{borderColor:d.$24},headerStyle:{borderColor:d.$20},children:m&&s&&n.jsx(L,{errors:v,transaction:s,handleChange:T,currencySeparators:m})})})})}export{G as default};
