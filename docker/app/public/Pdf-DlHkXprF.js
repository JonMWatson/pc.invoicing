import{u as y,a7 as w,bO as N,ar as D,p as i,j as e,by as P,ab as p,ax as j,a9 as S,i as m,aF as E,e as U,_ as k,bK as I,cF as T,Q as C,S as B}from"./bundle.D3-hVUGj.js";import{I as F}from"./InvoiceViewer-CknzAqf8.js";function G(a){const[n]=y(),t=w(),{id:f}=N(),o=D({resource:"invoice"}),{deliveryNote:c,setDeliveryNote:u,blobUrl:s,invoice:v,onHandleDeliveryNote:r}=a,l=d=>{u(d),d?r(U("/api/v1/invoices/:id/delivery_note?per_page=999999",{id:f}),!0):r(s,!1)};return i.useEffect(()=>{l(c)},[]),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("span",{className:"inline-flex items-center",children:e.jsx(P,{label:n("delivery_note"),checked:c,onChange:l})}),e.jsxs(p,{className:"flex items-center space-x-1",onClick:()=>t(m("/invoices/:id/email",{id:v.id})),children:[e.jsx(j,{element:S,color:"white"}),e.jsx("span",{children:n("email_invoice")})]}),e.jsxs(p,{className:"flex items-center space-x-1",onClick:()=>o(v,c),children:[e.jsx(j,{element:E,color:"white"}),e.jsx("span",{children:n("download")})]})]})}function Q(){const{id:a}=N(),{data:n}=k({id:a}),[t]=y(),[f,o]=i.useState(),[c,u]=i.useState(""),[s,v]=i.useState(),[r,l]=i.useState(!1),[d]=I(),h=T({resourceType:"invoice"});i.useEffect(()=>{n&&(v(n),d.has("delivery_note")&&l(!0))},[n]),i.useEffect(()=>{s&&!d.has("delivery_note")&&o(h(s))},[s]);const b=x=>u(x),g=[{name:t("invoices"),href:"/invoices"},{name:t("edit_invoice"),href:m("/invoices/:id/edit",{id:a})},{name:t("pdf"),href:m("/invoices/:id/pdf",{id:a})}];return e.jsx(C,{breadcrumbs:g,title:t("view_pdf"),navigationTopRight:s&&e.jsx(G,{invoice:s,blobUrl:c,deliveryNote:r,setDeliveryNote:l,onHandleDeliveryNote:(x,_=r)=>o(_?x:h(s))}),children:f?e.jsx(F,{onLink:b,link:f,method:"GET"}):e.jsx("div",{className:"flex justify-center items-center",style:{height:1500},children:e.jsx(B,{})})})}export{Q as default};
