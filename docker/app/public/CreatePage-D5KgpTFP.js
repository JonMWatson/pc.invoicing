import{u as b,a as w,cm as L,w as S,bK as D,ev as F,j as e,C as N,bt as Q,cp as p,c9 as a,S as C}from"./bundle.D3-hVUGj.js";import{C as R}from"./ClientSelector-DtB3q7fn.js";import{u as q,I as B,a as E}from"./useProductColumns-BqpEcmPs.js";import{u as G}from"./useTaskColumns-DD2_WhOx.js";import{Q as K,a as M}from"./QuoteFooter-CFYo5kN6.js";import"./ClientActionButtons-YTWpr-RA.js";import"./InvoiceViewer-CknzAqf8.js";function J(){const[r]=b(),h=w(),x=L(),{quote:s,isDefaultTerms:g,setIsDefaultTerms:j,isDefaultFooter:I,setIsDefaultFooter:_,errors:o,invoiceSum:y,client:f}=x,i=S(),[l]=D(),v=G(),T=q(),{handleChange:n,handleInvitationChange:k,handleLineItemChange:c,handleLineItemPropertyChange:m,handleCreateLineItem:d,handleDeleteLineItem:u}=F({client:f});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-12 gap-4",children:[e.jsx(N,{className:"col-span-12 xl:col-span-4 h-max shadow-sm",withContainer:!0,style:{borderColor:h.$24},children:e.jsx(R,{resource:s,onChange:t=>n("client_id",t),onLocationChange:t=>n("location_id",t),onClearButtonClick:()=>{n("client_id",""),n("location_id","")},onContactCheckboxChange:k,errorMessage:o==null?void 0:o.errors.client_id,disableWithSpinner:l.get("action")==="create"})}),e.jsx(K,{handleChange:n,errors:o}),e.jsx("div",{className:"col-span-12",children:e.jsxs(Q,{tabs:[r("products"),r("tasks")],defaultTabIndex:l.get("table")==="tasks"?1:0,children:[e.jsx("div",{children:s?e.jsx(p,{type:"product",resource:s,items:s.line_items.filter(t=>t.type_id===a.Product),columns:T,relationType:"client_id",onLineItemChange:c,onSort:t=>n("line_items",t),onLineItemPropertyChange:m,onCreateItemClick:()=>d(a.Product),onDeleteRowClick:u}):e.jsx(C,{})}),e.jsx("div",{children:s?e.jsx(p,{type:"task",resource:s,items:s.line_items.filter(t=>t.type_id===a.Task),columns:v,relationType:"client_id",onLineItemChange:c,onSort:t=>n("line_items",t),onLineItemPropertyChange:m,onCreateItemClick:()=>d(a.Task),onDeleteRowClick:u}):e.jsx(C,{})})]})}),e.jsx(M,{handleChange:n,errors:o,isDefaultFooter:I,isDefaultTerms:g,setIsDefaultFooter:_,setIsDefaultTerms:j}),s&&e.jsx(B,{relationType:"client_id",resource:s,invoiceSum:y,onChange:(t,P)=>n(t,P)})]}),(i==null?void 0:i.show_pdf_preview)&&e.jsx("div",{className:"my-4",children:s&&e.jsx(E,{for:"create",resource:s,entity:"quote",relationType:"client_id",endpoint:"/api/v1/live_preview?entity=:entity"})})]})}export{J as default};
