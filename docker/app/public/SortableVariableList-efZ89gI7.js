import{u as $,ah as E,b2 as V,a as F,p as x,j as a,bu as v,E as I,b5 as N,b6 as P,b7 as k,b8 as R,b0 as w,b9 as z,bc as o,g9 as h,bb as A}from"./bundle.D3-hVUGj.js";function T(l){const[m]=$(),i=E(),b=V(),{disabled:c}=l,d=F(),u=l.defaultVariables,[p,C]=x.useState(u);x.useEffect(()=>{var e,n;const s=((n=(e=i==null?void 0:i.settings)==null?void 0:e.pdf_variables)==null?void 0:n[l.for])??[];C(u.filter(t=>!s.includes(t.value)))},[i]);const D=s=>u.find(e=>e.value===s),_=s=>{var n,t,r,f;if(s==="")return;const e=o.cloneDeep(i);e.settings.pdf_variables||(o.set(e,"settings.pdf_variables",{}),(t=(n=e.settings)==null?void 0:n.pdf_variables)!=null&&t[l.for]||o.set(e,`settings.pdf_variables.${l.for}`,[])),(f=(r=e.settings.pdf_variables)==null?void 0:r[l.for])==null||f.push(s),b(h({object:"company",data:e}))},S=s=>{var t;const e=o.cloneDeep(i),n=(t=e.settings.pdf_variables)==null?void 0:t[l.for].filter(r=>r!==s);o.set(e,`settings.pdf_variables.${l.for}`,n),b(h({object:"company",data:e}))},y=s=>{var t,r;const e=o.cloneDeep(i),n=A((t=e.settings.pdf_variables)==null?void 0:t[l.for],s.source.index,(r=s.destination)==null?void 0:r.index);o.set(e,`settings.pdf_variables.${l.for}`,n),b(h({object:"company",data:e}))};return a.jsxs(a.Fragment,{children:[a.jsx(v,{leftSide:m("fields"),children:a.jsxs(I,{value:"",onValueChange:s=>_(s),disabled:c,customSelector:!0,clearAfterSelection:!0,children:[a.jsx("option",{}),p.map((s,e)=>a.jsx("option",{value:s.value,children:s.label},e))]})}),a.jsx(v,{leftSide:m("variables"),textVerticalAlign:"top",children:a.jsx(N,{onDragEnd:y,children:a.jsx(P,{droppableId:l.for,isDropDisabled:c,children:s=>{var e,n,t;return a.jsxs("div",{...s.droppableProps,ref:s.innerRef,children:[(t=(n=(e=i==null?void 0:i.settings)==null?void 0:e.pdf_variables)==null?void 0:n[l.for])==null?void 0:t.map((r,f)=>a.jsx(k,{draggableId:r,index:f,isDragDisabled:c,children:g=>{var j;return x.createElement("div",{...g.draggableProps,...g.dragHandleProps,ref:g.innerRef,className:"flex items-center justify-between",key:r},a.jsxs("div",{className:"flex items-center space-x-2 py-2",children:[a.jsx("div",{children:a.jsx(R,{size:"1.2rem",color:d.$17})}),a.jsx("span",{children:(j=D(r))==null?void 0:j.label})]}),a.jsx("div",{className:w({"cursor-not-allowed opacity-75":c,"cursor-pointer":!c}),onClick:()=>!c&&S(r),children:a.jsx(z,{color:d.$16,hoverColor:d.$3,borderColor:d.$5,hoverBorderColor:d.$17,size:"1.5rem"})}))}},r)),s.placeholder]})}})})})]})}export{T as S};
