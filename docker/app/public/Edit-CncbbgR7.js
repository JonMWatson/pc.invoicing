import{u as E,Y as A,bp as P,bO as k,a as R,L as B,p as t,i as D,j as e,Q as N,dW as $,C as F,bA as w,bd as i,r as H,e as Q,$ as q}from"./bundle.D3-hVUGj.js";import{u as I}from"./useResolveCurrencySeparator-ygcSKMxa.js";import{u as L,T as O}from"./useHandleChange-fmKramJB.js";import{a as U,u as W}from"./useActions-zsVNxYHb.js";import{u as Y}from"./transactions-09IVy-b-.js";import{P as z}from"./PreviousNextNavigation-BpWEW6Fs.js";function Z(){const[c]=E(),h=A(),C=P(),S=W(),{id:r}=k(),{data:n}=Y({id:r}),x=U(),u=R(),v=I(),{documentTitle:d}=B("edit_transaction"),[p,l]=t.useState(!1),[m,f]=t.useState(),[T,o]=t.useState(),[s,y]=t.useState(),g=L({setTransaction:y,setCurrencySeparators:f,setErrors:o}),_=[{name:c("transactions"),href:"/transactions"},{name:c("edit_transaction"),href:D("/transactions/:id/edit",{id:r})}],j=async()=>{p||(i.processing(),l(!0),o(void 0),H("PUT",Q("/api/v1/bank_transactions/:id",{id:r}),s).then(()=>{i.success("updated_transaction"),q(["bank_transactions"])}).catch(a=>{var b;((b=a.response)==null?void 0:b.status)===422&&(o(a.response.data),i.dismiss())}).finally(()=>l(!1)))};return t.useEffect(()=>{n&&y({...n,description:S(n.description)})},[n]),t.useEffect(()=>{if(s){const a=v(s.currency_id);a&&f(a)}},[s]),e.jsx(N,{title:d,breadcrumbs:_,...(h("edit_bank_transaction")||C(s))&&s&&{navigationTopRight:e.jsx(w,{resource:s,actions:x,onSaveClick:j,disableSaveButton:!s||p,cypressRef:"transactionActionDropdown"})},afterBreadcrumbs:e.jsx(z,{entity:"transaction",entityEndpointName:"bank_transaction"}),children:e.jsx($,{breadcrumbs:[],children:e.jsx(F,{title:d,className:"shadow-sm",style:{borderColor:u.$24},headerStyle:{borderColor:u.$20},children:s&&m&&e.jsx(O,{page:"edit",errors:T,transaction:s,handleChange:g,currencySeparators:m})})})})}export{Z as default};
