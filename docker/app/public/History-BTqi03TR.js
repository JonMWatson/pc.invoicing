import{u as b,bO as y,cm as C,a7 as $,d as N,g as k,a as _,br as w,f as B,b as F,j as s,C as S,b0 as T,S as D,bl as H,D as q,l as z,h as x,i as E,H as L,bC as M,r as O,e as P}from"./bundle.D3-hVUGj.js";import{H as R}from"./History-BTuPZ_tO.js";const A=L.div`
  background-color: ${({theme:n})=>n.backgroundColor};

  &:hover {
    background-color: ${({theme:n})=>n.hoverBackgroundColor};
  }
`;x.extend(M);function K(){var o,c;const[n]=b(),{id:l}=y(),u=C(),{credit:t}=u,p=$(),h=N(),v=k(),i=_(),{timeFormat:f}=w(),{dateFormat:j}=B(),{data:e,isLoading:g}=F({queryKey:["/api/v1/credits",l,"payments"],queryFn:()=>O("GET",P(`/api/v1/credits/${l}?include=payments,activities.history&reminder_schedule=true`)).then(a=>a.data.data),enabled:!!l,staleTime:1/0});return s.jsx(S,{title:n("history"),className:"shadow-sm",style:{borderColor:i.$24},headerStyle:{borderColor:i.$20},withoutBodyPadding:!0,children:s.jsxs("div",{className:T("w-full px-2 pt-2",{"pb-10":(o=e==null?void 0:e.activities)==null?void 0:o.length,"pb-6":(e==null?void 0:e.activities)&&(e==null?void 0:e.activities.filter(({history:a})=>a==null?void 0:a.id).length)===0}),children:[g&&s.jsx("div",{className:"flex justify-center",children:s.jsx(D,{})}),s.jsxs("div",{children:[(e==null?void 0:e.activities)&&e.activities.filter(({history:a})=>a==null?void 0:a.id).length===0&&s.jsx("div",{className:"px-3 pt-3 text-sm",children:n("api_404")}),!!((c=e==null?void 0:e.activities)!=null&&c.length)&&s.jsx("div",{className:"flex flex-col w-full",children:(e==null?void 0:e.activities)&&e.activities.map(a=>{var d,r,m;return s.jsxs(A,{className:"flex items-center justify-start p-4 space-x-3 rounded-md cursor-pointer",onClick:()=>p(E("/activities/:id",{id:a.id})),theme:{backgroundColor:i.$1,hoverBackgroundColor:i.$25},children:[s.jsx("div",{className:"p-2 rounded-full",style:{backgroundColor:i.$20},children:s.jsx(R,{size:"1.3rem",color:i.$16,filledColor:i.$16})}),s.jsxs("div",{className:"flex flex-col items-start space-y-0.5 justify-center",children:[s.jsxs("div",{className:"flex space-x-1 text-sm",children:[s.jsx("span",{style:{color:i.$3},children:t!=null&&t.client?h(a.history.amount,(d=t==null?void 0:t.client)==null?void 0:d.country_id,(r=t==null?void 0:t.client)==null?void 0:r.settings.currency_id):null}),s.jsx("div",{children:s.jsx(H,{color:i.$17,size:"1.1rem"})}),s.jsx(q,{to:`/clients/${a.client_id}`,renderSpan:v("client",t==null?void 0:t.client),children:(m=t==null?void 0:t.client)==null?void 0:m.display_name})]}),s.jsxs("div",{className:"flex items-center space-x-1 text-xs",style:{color:i.$17},children:[s.jsx("span",{children:z(a.created_at,`${j} ${f}`)}),s.jsx("span",{children:x.unix(a.created_at).fromNow()})]})]})]},a.id)})})]})]})})}export{K as default};
