import{u as P,bK as b,w,cm as S,a as D,ev as N,j as e,C as Q,es as R,bt as F,cp as h,c9 as a,S as x}from"./bundle.D3-hVUGj.js";import{C as q}from"./ClientSelector-DtB3q7fn.js";import{u as E,I as O,a as $}from"./useProductColumns-BqpEcmPs.js";import{Q as A,a as B}from"./QuoteFooter-CFYo5kN6.js";import{u as G}from"./useTaskColumns-DD2_WhOx.js";import"./ClientActionButtons-YTWpr-RA.js";import"./InvoiceViewer-CknzAqf8.js";function W(){const[i]=P(),[C]=b(),r=w(),j=S(),{quote:t,errors:n,isDefaultTerms:y,isDefaultFooter:v,client:l,setIsDefaultFooter:f,setIsDefaultTerms:g,invoiceSum:I}=j,c=D(),_=G(),T=E(),{handleChange:o,handleInvitationChange:k,handleLineItemChange:m,handleLineItemPropertyChange:d,handleCreateLineItem:u,handleDeleteLineItem:p}=N({client:l});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-12 gap-4",children:[e.jsx(Q,{className:"col-span-12 xl:col-span-4 h-max px-6 py-2 shadow-sm",style:{borderColor:c.$24},children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[t&&e.jsxs("div",{className:"flex items-center space-x-9",children:[e.jsx("span",{className:"text-sm font-medium",style:{color:c.$22},children:i("status")}),e.jsx("div",{children:e.jsx(R,{entity:t})})]}),e.jsx(q,{resource:t,onChange:s=>o("client_id",s),onClearButtonClick:()=>o("client_id",""),onLocationChange:s=>o("location_id",s),onContactCheckboxChange:k,errorMessage:n==null?void 0:n.errors.client_id,textOnly:!0,readonly:!0})]})}),e.jsx(A,{handleChange:o,errors:n}),e.jsx("div",{className:"col-span-12",children:e.jsxs(F,{tabs:[i("products"),i("tasks")],defaultTabIndex:C.get("table")==="tasks"?1:0,children:[e.jsx("div",{children:t&&l?e.jsx(h,{type:"product",resource:t,items:t.line_items.filter(s=>s.type_id===a.Product),columns:T,relationType:"client_id",onLineItemChange:m,onSort:s=>o("line_items",s),onLineItemPropertyChange:d,onCreateItemClick:()=>u(a.Product),onDeleteRowClick:p}):e.jsx(x,{})}),e.jsx("div",{children:t&&l?e.jsx(h,{type:"task",resource:t,items:t.line_items.filter(s=>s.type_id===a.Task),columns:_,relationType:"client_id",onLineItemChange:m,onSort:s=>o("line_items",s),onLineItemPropertyChange:d,onCreateItemClick:()=>u(a.Task),onDeleteRowClick:p}):e.jsx(x,{})})]})}),e.jsx(B,{handleChange:o,errors:n,isDefaultFooter:v,isDefaultTerms:y,setIsDefaultFooter:f,setIsDefaultTerms:g}),t&&e.jsx(O,{relationType:"client_id",resource:t,invoiceSum:I,onChange:(s,L)=>o(s,L)})]}),(r==null?void 0:r.show_pdf_preview)&&e.jsx("div",{className:"my-4",children:t&&e.jsx($,{for:"invoice",resource:t,entity:"quote",relationType:"client_id",endpoint:"/api/v1/live_preview?entity=:entity",withRemoveLogoCTA:!0})})]})}export{W as default};
