import{u as M,ao as O,p as u,j as i,aa as S,ct as B,c1 as f,e as c,ab as k,cx as p,cy as x,bd as b,r as w,$ as Q}from"./bundle.D3-hVUGj.js";import{u as V,a as _}from"./designs-Cr-Aj-yC.js";function A(a){var v,y;const[t]=M(),{isAdmin:C,isOwner:P}=O(),j=_(),{actionVisibility:g=!0}=a,[m,r]=u.useState(!1),[l,o]=u.useState(null),[e,h]=u.useState(null),{data:d}=V({enabled:m});u.useEffect(()=>{d&&o(d)},[d]);const D=()=>{l&&(b.processing(),h(null),w("POST",c("/api/v1/designs"),l).then(()=>{b.success("created_design"),Q(["designs"]),o(null),r(!1)}).catch(s=>{var n;((n=s.response)==null?void 0:n.status)===422&&(h(s.response.data),b.dismiss())}))};return i.jsxs(i.Fragment,{children:[i.jsxs(S,{title:t("new_design"),visible:m,onClose:r,overflowVisible:!0,children:[i.jsx(B,{label:t("name"),onValueChange:s=>o(n=>n&&{...n,name:s}),errorMessage:e==null?void 0:e.errors.name}),i.jsx(f,{endpoint:c("/api/v1/designs?per_page=500&status=active"),onChange:s=>o(n=>s.resource&&{...s.resource,name:(n==null?void 0:n.name)||""}),inputOptions:{label:(v=a.inputLabel)==null?void 0:v.toString(),value:(l==null?void 0:l.id)||null},entryOptions:{id:"id",label:"name",value:"id"},action:{label:t("new_design"),onClick:()=>r(!0),visible:g},sortBy:"name|asc",onDismiss:()=>o(null),disableWithQueryParameter:a.disableWithQueryParameter,errorMessage:(e==null?void 0:e.errors["design.header"])||(e==null?void 0:e.errors["design.body"])||(e==null?void 0:e.errors["design.footer"])||(e==null?void 0:e.errors["design.includes"])}),i.jsx(k,{onClick:D,children:t("save")})]}),i.jsx(f,{endpoint:c("/api/v1/designs?status=active"),onChange:s=>s.resource&&a.onChange(s.resource),inputOptions:{label:(y=a.inputLabel)==null?void 0:y.toString(),value:a.value||null},entryOptions:{id:"id",label:"name",value:"id"},action:{label:t("new_design"),onClick:()=>r(!0),visible:g&&(C||P)&&(p()||x())},sortBy:"name|asc",onDismiss:a.onClearButtonClick,disableWithQueryParameter:a.disableWithQueryParameter,errorMessage:a.errorMessage,...!p()&&!x()&&{includeOnly:j,includeByLabel:!0}})]})}export{A as D};
