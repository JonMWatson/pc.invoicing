import{u as h,p as M,fc as j,j as s,aw as o,ax as i,a9 as D,aa as A,ab as B,a7 as I,g as P,at as S,a1 as E,aI as T,aD as N,aF as m,dd as O,i as F,fd as $,fe as V,bd as q,aO as z,ff as p,bj as G}from"./bundle.D3-hVUGj.js";import{u as H}from"./useDownloadPdfs-C_Q3GnYI.js";const J=t=>{const[l]=h(),[d,r]=M.useState(!1),{selectedIds:c,setSelected:u}=t,x=j();return s.jsxs(s.Fragment,{children:[s.jsx(o,{onClick:()=>r(!0),icon:s.jsx(i,{element:D}),children:l("send_email")}),s.jsxs(A,{title:l("bulk_email_purchase_orders"),visible:d,onClose:()=>r(!1),children:[s.jsx("span",{className:"text-lg text-gray-900",children:l("are_you_sure")}),s.jsx("div",{className:"flex justify-end space-x-4 mt-5",children:s.jsx(B,{behavior:"button",onClick:()=>{x(c,"email"),u([]),r(!1)},children:s.jsx("span",{className:"text-base mx-3",children:l("yes")})})})]})]})};function U(){const[t]=h(),l=I(),d=P(),r=j(),c=G(),u=S({entity:"purchase_order"}),x=H({entity:"purchase_order"}),_=e=>e.some(({documents:n})=>n.length),k=e=>e.flatMap(({documents:n})=>n.map(({id:a})=>a)),f=(e,n)=>{const a=k(e);c(a,"download"),n([])},v=e=>e.every(({status_id:n})=>n===p.Draft),C=e=>e.every(({expense_id:n})=>!n),g=e=>e.every(({status_id:n})=>n===p.Accepted),{setChangeTemplateVisible:w,setChangeTemplateResources:y,setChangeTemplateEntityContext:b}=E();return[({selectedIds:e,setSelected:n})=>s.jsx(J,{selectedIds:e,setSelected:n}),({selectedIds:e,selectedResources:n,setSelected:a})=>v(n)&&s.jsx(o,{onClick:()=>{r(e,"mark_sent"),a([])},icon:s.jsx(i,{element:T}),children:t("mark_sent")}),({selectedIds:e,setSelected:n})=>s.jsx(o,{onClick:()=>{u(e),n([])},icon:s.jsx(i,{element:N}),children:t("print_pdf")}),({selectedIds:e,setSelected:n})=>s.jsx(o,{onClick:()=>{x(e),n([])},icon:s.jsx(i,{element:m}),children:t("download_pdf")}),({selectedResources:e})=>(e==null?void 0:e.length)&&e[0].expense_id&&!d("expense",e[0].expense)&&s.jsx(o,{onClick:()=>l(F("/expenses/:id/edit",{id:e[0].expense_id})),icon:s.jsx(i,{element:O}),children:`${t("view")} ${t("expense")}`}),({selectedIds:e,selectedResources:n,setSelected:a})=>n&&C(n)&&s.jsx(o,{onClick:()=>{r(e,"expense"),a([])},icon:s.jsx(i,{element:$}),children:t("convert_to_expense")}),({selectedIds:e,selectedResources:n,setSelected:a})=>g(n)&&s.jsx(o,{onClick:()=>{r(e,"add_to_inventory"),a([])},icon:s.jsx(i,{element:V}),children:t("add_to_inventory")}),({selectedResources:e,setSelected:n})=>s.jsx(o,{onClick:()=>_(e)?f(e,n):q.error("no_documents_to_download"),icon:s.jsx(i,{element:m}),children:t("documents")}),({selectedResources:e})=>s.jsx(o,{onClick:()=>{w(!0),y(e),b({endpoint:"/api/v1/purchase_orders/bulk",entity:"purchase_order"})},icon:s.jsx(i,{element:z}),children:t("run_template")})]}export{U as u};
