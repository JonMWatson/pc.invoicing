import{u as p,f as F,g as A,w as E,aU as B,bZ as I,aV as L,p as M,aW as k,j as n,l as u,D as x,i as j,aY as N,aZ as S,a_ as V,a$ as g,b0 as H,aX as P,aw as R,bd as O,ax as $,aF as G,bj as Y,L as Z,Y as z,Q,k as U,a2 as b,a3 as W,a4 as X}from"./bundle.D3-hVUGj.js";import{D as q}from"./DataTableColumnsPicker-nvfGKatE.js";import{I as J}from"./ImportButton-DQq538as.js";import{u as K}from"./useActions-DOcQgtvA.js";import"./Import-4Hd9h9R0.js";const w=["number","name","city","phone","entity_state","created_at"];function D(){const[e,d,l,r]=k({entity:"vendor"});return["number","name","city","phone","entity_state","created_at","address2","archived_at","last_login_at","contacts","country_id","currency_id",e,d,l,r,"documents","id_number","is_deleted","postal_code","private_notes","address1","updated_at","vat_number","website"]}function tt(){var C;const{t:e}=p(),{dateFormat:d}=F(),l=A(),r=E(),i=B(),m=I(),s=L();D();const a=M.useCallback(t=>{const o=[];return t.contacts.map(y=>o.push(`${y.first_name} ${y.last_name}`)),o.join("<br />")},[]),[c,f,v,h]=k({entity:"vendor"}),T=[{column:"number",id:"number",label:e("number"),format:(t,o)=>n.jsx(x,{to:j("/vendors/:id",{id:o.id}),renderSpan:l("vendor",o),children:t})},{column:"name",id:"name",label:e("name"),format:(t,o)=>n.jsx(x,{to:j("/vendors/:id",{id:o.id}),renderSpan:l("vendor",o),children:t})},{column:"city",id:"city",label:e("city")},{column:"phone",id:"phone",label:e("phone")},{column:"entity_state",id:"id",label:e("entity_state"),format:(t,o)=>n.jsx(N,{entity:o})},{column:"created_at",id:"created_at",label:e("created_at"),format:t=>u(t,d)},{column:"last_login_at",id:"last_login",label:e("last_login"),format:t=>u(t,d)},{column:"address1",id:"address1",label:e("address1")},{column:"address2",id:"address2",label:e("address2")},{column:"archived_at",id:"archived_at",label:e("archived_at"),format:t=>u(t,d)},{column:"contacts",id:"id",label:e("contacts"),format:(t,o)=>n.jsx("span",{dangerouslySetInnerHTML:{__html:a(o)}})},{column:"country_id",id:"country_id",label:e("country"),format:t=>{var o;return t&&((o=i(t))==null?void 0:o.name)}},{column:"currency_id",id:"id",label:e("currency"),format:t=>{var o;return t&&((o=m(t))==null?void 0:o.code)}},{column:c,id:"custom_value1",label:c,format:t=>s("vendor1",t==null?void 0:t.toString())},{column:f,id:"custom_value2",label:f,format:t=>s("vendor2",t==null?void 0:t.toString())},{column:v,id:"custom_value3",label:v,format:t=>s("vendor3",t==null?void 0:t.toString())},{column:h,id:"custom_value4",label:h,format:t=>s("vendor4",t==null?void 0:t.toString())},{column:"documents",id:"documents",label:e("documents"),format:(t,o)=>o.documents.length},{column:"id_number",id:"id_number",label:e("id_number")},{column:"is_deleted",id:"is_deleted",label:e("is_deleted"),format:(t,o)=>o.is_deleted?e("yes"):e("no")},{column:"postal_code",id:"postal_code",label:e("postal_code")},{column:"private_notes",id:"private_notes",label:e("private_notes"),format:t=>n.jsx(S,{width:"auto",tooltipElement:n.jsx("div",{className:"w-full max-h-48 overflow-auto whitespace-normal break-all",children:n.jsx("article",{className:H("prose prose-sm",{"prose-invert":!(r!=null&&r.dark_mode)}),dangerouslySetInnerHTML:{__html:g(t)}})}),children:n.jsx("span",{children:V(g(t)).slice(0,50)})})},{column:"updated_at",id:"updated_at",label:e("updated_at"),format:t=>u(t,d)},{column:"vat_number",id:"vat_number",label:e("vat_number")},{column:"website",id:"website",label:e("website"),format:t=>n.jsx(P,{text:t.toString()})}],_=((C=r==null?void 0:r.react_table_columns)==null?void 0:C.vendor)||w;return T.filter(t=>_.includes(t.column)).sort((t,o)=>_.indexOf(t.column)-_.indexOf(o.column))}const et=()=>{const[e]=p(),d=Y(),l=s=>s.some(({documents:a})=>a.length),r=s=>s.flatMap(({documents:a})=>a.map(({id:c})=>c)),i=(s,a)=>{const c=r(s);d(c,"download"),a==null||a([])};return[({selectedResources:s,setSelected:a})=>n.jsx(R,{onClick:()=>s&&l(s)?i(s,a):O.error("no_documents_to_download"),icon:n.jsx($,{element:G}),children:e("documents")})]};function dt(){const{documentTitle:e}=Z("vendors"),[d]=p(),l=z(),r=[{name:d("vendors"),href:"/vendors"}],i=K(),m=tt(),s=D(),a=et();return n.jsx(Q,{title:e,breadcrumbs:r,children:n.jsx(U,{resource:"vendor",columns:m,endpoint:"/api/v1/vendors?sort=id|desc",bulkRoute:"/api/v1/vendors/bulk",linkToCreate:"/vendors/create",linkToEdit:"/vendors/:id/edit",withResourcefulActions:!0,customActions:i,customBulkActions:a,rightSide:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(q,{columns:s,defaultColumns:w,table:"vendor"}),n.jsx(W,{type:"component",guards:[X(b("create_vendor"),b("edit_vendor"))],component:n.jsx(J,{route:"/vendors/import"})})]}),linkToCreateGuards:[b("create_vendor")],hideEditableOptions:!l("edit_vendor"),enableSavingFilterPreference:!0})})}export{dt as default};
