import{bq as m,p as i,bd as r,r as x,j as n,S as g}from"./bundle.D3-hVUGj.js";const l=!!navigator.userAgent.match(/Android/i);function j(e){const o=m(),{renderAsHTML:d}=e,s=i.useRef(null),a=i.useRef(null),[u,f]=i.useState(!1);return i.useEffect(()=>(e.withToast&&r.processing(),f(!0),e.enabled!==!1&&o.fetchQuery({queryKey:[e.link,JSON.stringify(e.resource)],retry:0,queryFn:({signal:h})=>(e.onRequest&&e.onRequest(),x(e.method,e.link,e.resource,{responseType:"arraybuffer",signal:h}).then(c=>{const y=new Blob([c.data],{type:d?"text/html":"application/pdf"}),t=URL.createObjectURL(y);l&&s.current&&(s.current.href=t,e.onLink&&e.onLink(t)),!l&&a.current&&(a.current.src=t,e.onLink&&e.onLink(t)),r.dismiss()}).catch(c=>{e.onError&&e.onError(c),r.dismiss()}).finally(()=>f(!1)))}),()=>{r.dismiss()}),[e.link,e.resource,e.enabled]),l?n.jsxs("p",{children:["Unable to preview PDF. Â ",n.jsx("a",{ref:s,style:{textDecoration:"underline"},children:"Click to download it."})]}):n.jsxs(n.Fragment,{children:[u&&n.jsx("div",{className:"flex justify-center items-center",style:{height:e.height||1500},children:n.jsx(g,{})}),n.jsx("iframe",{ref:a,width:"100%",height:u?0:e.height||1500,loading:"lazy",tabIndex:-1})]})}export{j as I,l as a};
